<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="_csrf" th:content="${_csrf?.token ?: ''}" th:if="${_csrf}" />
    <meta name="_csrf_header" th:content="${_csrf?.headerName ?: 'X-CSRF-TOKEN'}" th:if="${_csrf}" />
    <title th:text="'HiveWise - ' + ${vault.name}"></title>
    <link rel="stylesheet" href="/css/backend-plugin.min.css?v=1.0.0">
    <link rel="stylesheet" href="/css/backend.css?v=1.0.0">
    <link rel="stylesheet" href="/vendor/@fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css">
    <link rel="stylesheet" href="/vendor/remixicon/fonts/remixicon.css">
    <link rel="stylesheet" href="/vendor/@icon/dripicons/dripicons.css">
    <link rel="stylesheet" href="/css/loader.css">
    <link rel="stylesheet" href="/css/vault-detail.css">
    <link rel="icon" href="/images/logo/logo_100x100_transparent.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
    <link rel="stylesheet"
        href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
</head>

<body class="noteplus-layout"
    th:classappend="${param.assistant != null and param.assistant[0] == 'true'} ? 'assistant-mode' : ''">
    <div th:if="${showToast}" id="toast-notification" class="toast-notification"
        th:classappend="${toastType == 'error'} ? 'error'" style="display: flex; opacity: 1; ">
        <div class="toast-content">
            <svg th:if="${toastType != 'error'}" class="toast-icon success-icon" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <svg th:if="${toastType == 'error'}" class="toast-icon error-icon" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span id="toast-message" th:text="${toastMessage}">Message</span>
        </div>
    </div>
    <div class="wrapper">
        <div class="iq-sidebar  sidebar-default ">
            <div class="iq-sidebar-logo d-flex align-items-center justify-content-between" style="">

                <div class="sidebar-caption dropdown"
                    style="justify-content: center; margin-left: 5px; width: calc(100% - 10px); margin-right: 0px!important;">
                    <a href="#" class="iq-user-toggle d-flex align-items-center justify-content-between"
                        id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                        style="width: 100%;">
                        <div class="caption" style="flex: 1; min-width: 0;">
                            <h5 class="mb-0 line-height"
                                style="max-width: 100%; word-wrap: break-word; overflow-wrap: break-word; overflow: hidden; white-space: normal;">
                                <strong th:text="${vault.name}">Vault Name</strong>
                            </h5>

                        </div>
                        <i style="margin-left: 10px; flex-shrink: 0;" class="las la-angle-down"></i>
                    </a>
                    <div class="dropdown-menu w-50 border-0 my-2" aria-labelledby="dropdownMenuButton"
                        style="min-width: 180px !important; border-radius: 15px !important; padding: 10px !important;">
                        <a class="dropdown-item mb-1 "
                            th:href="@{'/vault-management/edit-vault/general?id=' + ${vault.id}}"
                            style="border-radius: 15px !important; padding: 8px 10px !important;">
                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                                style="margin-top: -3px; margin-left: -2px;" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="1.2"
                                    d="M21 13v-2a1 1 0 0 0-1-1h-.757l-.707-1.707.535-.536a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0l-.536.535L14 4.757V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v.757l-1.707.707-.536-.535a1 1 0 0 0-1.414 0L4.929 6.343a1 1 0 0 0 0 1.414l.536.536L4.757 10H4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h.757l.707 1.707-.535.536a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l.536-.535 1.707.707V20a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-.757l1.707-.708.536.536a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-.535-.536.707-1.707H20a1 1 0 0 0 1-1Z" />
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="1.2" d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                            </svg>
                            <span style="font-size: 14px !important; margin-left: 0px;">Vault Settings</span>
                        </a>
                        <hr class="my-2">
                        <a class="dropdown-item" href="http://localhost:8080/vault-management"
                            style="border-radius: 15px !important; padding: 8px 10px !important;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                style="margin-top: -3px; " class="bi bi-safe" viewBox="0 0 16 16">
                                <path stroke-width="2"
                                    d="M1 1.5A1.5 1.5 0 0 1 2.5 0h12A1.5 1.5 0 0 1 16 1.5v13a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 1 14.5V13H.5a.5.5 0 0 1 0-1H1V8.5H.5a.5.5 0 0 1 0-1H1V4H.5a.5.5 0 0 1 0-1H1zM2.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5z" />
                                <path stroke-width="2"
                                    d="M13.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5M4.828 4.464a.5.5 0 0 1 .708 0l1.09 1.09a3 3 0 0 1 3.476 0l1.09-1.09a.5.5 0 1 1 .707.708l-1.09 1.09c.74 1.037.74 2.44 0 3.476l1.09 1.09a.5.5 0 1 1-.707.708l-1.09-1.09a3 3 0 0 1-3.476 0l-1.09 1.09a.5.5 0 1 1-.708-.708l1.09-1.09a3 3 0 0 1 0-3.476l-1.09-1.09a.5.5 0 0 1 0-.708M6.95 6.586a2 2 0 1 0 2.828 2.828A2 2 0 0 0 6.95 6.586" />
                            </svg> <span style="font-size: 14px !important; margin-left: 2px;">Back to My Vaults</span>
                        </a>
                    </div>
                </div>

            </div>

            <div class="data-scrollbar" data-scroll="1">
                <nav class="iq-sidebar-menu" style="margin-bottom: 20px;">

                    <ul id="iq-sidebar-toggle" class="iq-menu">
                        <li class="" style="margin-bottom: 0px !important;" id="knowledge-assistant-menu">
                            <a href="javascript:void(0);" onclick="showAssistantView()" class=""
                                style="padding: 8px 10px;">
                                <img id="assistant-icon-normal" src="images/icon/icon_assistant.png" width="25px"
                                    alt="icon_assistant" style="margin-right: 3px;">
                                <img id="assistant-icon-active" src="images/logo/logo_100x100_transparent.png"
                                    width="25px" alt="icon_assistant" style="margin-right: 3px; display: none;">

                                <span>Knowledge Assistant</span>
                            </a>
                            <ul id="index" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                            </ul>
                        </li>

                        <li class="">
                            <a href="javascript:void(0);" onclick="showVaultSearchModal()" class=""
                                style="padding: 8px 10px;">
                                <i>
                                    <svg width="23" class="" id="iq-main-2" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                                            d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" fill="white"
                                            style="stroke-dasharray: 108, 128; stroke-dashoffset: 0;">
                                        </path>
                                    </svg>
                                </i>
                                <span>Search</span>
                            </a>
                            <ul id="index" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                            </ul>
                        </li>

                    </ul>
                </nav>

                <div class="divider"></div>

                <nav class="iq-sidebar-menu">
                    <ul id="iq-sidebar-toggle" class="iq-menu">
                        <li class="personal-folder"
                            th:classappend="${showPrivate} == true and not ${param.folder} ? ' active' : ''">
                            <a th:href="@{'/vault-detail?id=' + ${vault.id} + '&private=true'}"
                                class="collapsed personal-toggle" aria-expanded="false" style="padding: 8px 10px;">
                                <span class="combined-icon-wrapper"
                                    style="position: relative; display: flex; align-items: center; width: 22px; height: 22px;">
                                    <svg class="personal-icon" id="iq-main-3" aria-hidden="true"
                                        style="position: absolute; left: 0; top: 0; width: 22px; height: 22px; transition: opacity 0.2s;"
                                        xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                                        viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                    </svg>
                                    <span
                                        class="expand-collapse-icon d-flex flex-column justify-content-center btn-dropdown personal-toggle-btn"
                                        style="cursor: pointer;">
                                        <i id="personal-arrow-active"
                                            class="las la-angle-right iq-arrow-right arrow-active"></i>
                                        <i id="personal-arrow-hover"
                                            class="las la-angle-down iq-arrow-right arrow-hover"></i>
                                    </span>
                                </span>
                                <span style="margin-left: 10px;">Private Knowledge</span>
                                <div class="add-folder-icon" id="add-private-folder-icon" style="margin-left: 10px;">
                                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
                                        viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="1.5" d="M5 12h14m-7 7V5" />
                                    </svg>
                                </div>
                            </a>
                            <ul id="yournote" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                                <th:block th:each="folder : ${personalFolders}">
                                    <th:block
                                        th:replace="fragments/folder-tree :: folderNode(${folder}, 0, 'personal')" />
                                </th:block>
                            </ul>
                        </li>
                        <div class="divider" style="margin-top: 25px; "></div>

                        <!-- ----------------------------Public---------------------------- -->

                        <li class="public-folder"
                            th:classappend="${showOfficial} == true and not ${param.folder} ? ' active' : ''"
                            style="margin-top: 15px;">
                            <a th:href="@{'/vault-detail?id=' + ${vault.id} + '&official=true'}"
                                class="collapsed public-toggle" aria-expanded="false" style="padding: 8px 10px;">
                                <span class="combined-icon-wrapper"
                                    style="position: relative; display: flex; align-items: center; width: 22px; height: 22px;">
                                    <svg class="public-icon" id="iq-main-4" aria-hidden="true" style="margin-top: -2px;"
                                        xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                                        viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="2"
                                            d="m8.032 12 1.984 1.984 4.96-4.96m4.55 5.272.893-.893a1.984 1.984 0 0 0 0-2.806l-.893-.893a1.984 1.984 0 0 1-.581-1.403V7.04a1.984 1.984 0 0 0-1.984-1.984h-1.262a1.983 1.983 0 0 1-1.403-.581l-.893-.893a1.984 1.984 0 0 0-2.806 0l-.893.893a1.984 1.984 0 0 1-1.403.581H7.04A1.984 1.984 0 0 0 5.055 7.04v1.262c0 .527-.209 1.031-.581 1.403l-.893.893a1.984 1.984 0 0 0 0 2.806l.893.893c.372.372.581.876.581 1.403v1.262a1.984 1.984 0 0 0 1.984 1.984h1.262c.527 0 1.031.209 1.403.581l.893.893a1.984 1.984 0 0 0 2.806 0l.893-.893a1.985 1.985 0 0 1 1.403-.581h1.262a1.984 1.984 0 0 0 1.984-1.984V15.7c0-.527.209-1.031.581-1.403Z" />
                                    </svg>
                                    <span
                                        class="expand-collapse-icon d-flex flex-column justify-content-center btn-dropdown public-toggle-btn"
                                        style="cursor: pointer;">
                                        <i id="public-arrow-active"
                                            class="las la-angle-right iq-arrow-right arrow-active"></i>
                                        <i id="public-arrow-hover"
                                            class="las la-angle-down iq-arrow-right arrow-hover"></i>
                                    </span>
                                </span>

                                <span style="margin-left: 10px;">Official Knowledge</span>
                                <div class=" add-folder-icon" id="add-public-folder-icon" style="margin-left: 10px;">
                                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
                                        viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="1.5" d="M5 12h14m-7 7V5" />
                                    </svg>
                                </div>

                            </a>
                            <ul id="notebooks" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle"
                                data-type="public">
                                <th:block th:each="folder : ${publicFolders}">
                                    <th:block
                                        th:replace="fragments/folder-tree :: folderNode(${folder}, 0, 'public')" />
                                </th:block>
                            </ul>
                        </li>
                    </ul>
                </nav>
                <div class="divider" style="margin-top: 25px; "></div>
                <nav class="iq-sidebar-menu">
                    <ul id="iq-sidebar-toggle" class="iq-menu">

                        <li class="" style="margin-bottom: 0px !important;"
                            th:classappend="${showSessions} == true ? ' active' : ''">
                            <a th:href="@{'/vault-detail?id=' + ${vault.id} + '&sessions=true'}" class=""
                                style="padding: 10px 10px;">
                                <i>
                                    <svg width="20" class="" id="iq-main-8" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24" stroke="currentColor" style="margin-top: -2px;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </i>
                                <span>Insight Meeting</span>
                            </a>
                        </li>
                        <li class="" style="margin-bottom: 0px !important;"
                            th:classappend="${showBin} == true ? ' active' : ''">
                            <a th:href="@{'/vault-detail?id=' + ${vault.id} + '&bin=true'}" class=""
                                style="padding: 10px 10px;">
                                <i>
                                    <svg width="20" class="" id="iq-main-10" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24" stroke="currentColor" style="margin-top: -4px;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </i>
                                <span>Bin</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="p-3"></div>
            </div>
            </nav>
        </div>
        <div class="content-page">
            <div class="container-fluid note-details">
                <div class="desktop-header">
                    <div class="card card-block topnav-left">
                        <div class="card-body write-card" style="padding: 15px">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="iq-note-callapse-menu" style="display: flex;
                                align-items: center;
                                justify-content: space-between;
                                width: 100%;">
                                    <div th:if="${showSessions}">
                                        <h3 class="" id="breadcrumb-title">
                                            <svg width="30" class="" id="iq-main-8" xmlns="http://www.w3.org/2000/svg"
                                                fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                                style="margin-top: -7px;">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                            </svg>
                                            <span>Knowledge Meeting</span>
                                        </h3>
                                    </div>

                                    <div th:if="${showBin}">
                                        <h3 class="" id="breadcrumb-title">
                                            <a th:href="@{/vault-detail(id=${vault.id}, bin='true')}"
                                                class="breadcrumb-link main-breadcrumb-link"
                                                th:classappend="${#lists.isEmpty(currentFolderPath)} ? 'active' : ''">
                                                <svg width="30" class="" id="iq-main-10"
                                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                    stroke="currentColor" style="margin-top: -7px;">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                                                    </path>
                                                </svg>
                                                <span>Bin</span>
                                            </a>
                                        </h3>
                                    </div>
                                    <div th:if="${showPrivate}">
                                        <h3 class="" id="breadcrumb-title">
                                            <a th:href="@{/vault-detail(id=${vault.id}, private='true')}"
                                                class="breadcrumb-link main-breadcrumb-link"
                                                th:classappend="${#lists.isEmpty(currentFolderPath)} ? 'active' : ''">
                                                <svg class="personal-icon" id="iq-main-3" aria-hidden="true"
                                                    style=" width: 30px; height: 30px; margin-top: -7px;"
                                                    xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                                    fill="none" viewBox="0 0 24 24">
                                                    <path stroke="currentColor" stroke-linecap="round"
                                                        stroke-linejoin="round" stroke-width="2"
                                                        d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z">
                                                    </path>
                                                </svg>
                                                <span>Private Knowledge</span>
                                            </a>
                                            <span th:if="${currentFolderPath}" th:remove="tag">
                                                <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    fill="none" viewBox="0 0 24 24">
                                                    <path stroke="currentColor" stroke-linecap="round"
                                                        stroke-linejoin="round" stroke-width="2" d="m10 16 4-4-4-4" />
                                                </svg>
                                            </span>
                                            <span th:if="${currentFolderPath}" th:each="f, iter : ${currentFolderPath}">
                                                <a th:href="@{/vault-detail(id=${vault.id}, folder=${f.id}, private=${showPrivate} ? 'true' : null, official=${showOfficial} ? 'true' : null)}"
                                                    th:text="${f.name}" th:classappend="${iter.last} ? 'active' : ''"
                                                    class="breadcrumb-link">
                                                </a>
                                                <span th:if="${!iter.last}">
                                                    <svg class="w-6 h-6 text-gray-800 dark:text-white"
                                                        aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
                                                        height="24" fill="none" viewBox="0 0 24 24">
                                                        <path stroke="currentColor" stroke-linecap="round"
                                                            stroke-linejoin="round" stroke-width="2"
                                                            d="m10 16 4-4-4-4" />
                                                    </svg>
                                                </span>
                                            </span>
                                        </h3>
                                    </div>
                                    <div th:if="${showOfficial}">
                                        <h3 class="" id="breadcrumb-title">
                                            <a th:href="@{/vault-detail(id=${vault.id}, official='true')}"
                                                class="breadcrumb-link main-breadcrumb-link"
                                                th:classappend="${#lists.isEmpty(currentFolderPath)} ? 'active' : ''">
                                                <svg class="public-icon" id="iq-main-4" aria-hidden="true"
                                                    style="margin-top: -7px; opacity: 1; visibility: visible;"
                                                    xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                                    fill="none" viewBox="0 0 24 24">
                                                    <path stroke="currentColor" stroke-linecap="round"
                                                        stroke-linejoin="round" stroke-width="2"
                                                        d="m8.032 12 1.984 1.984 4.96-4.96m4.55 5.272.893-.893a1.984 1.984 0 0 0 0-2.806l-.893-.893a1.984 1.984 0 0 1-.581-1.403V7.04a1.984 1.984 0 0 0-1.984-1.984h-1.262a1.983 1.983 0 0 1-1.403-.581l-.893-.893a1.984 1.984 0 0 0-2.806 0l-.893.893a1.984 1.984 0 0 1-1.403.581H7.04A1.984 1.984 0 0 0 5.055 7.04v1.262c0 .527-.209 1.031-.581 1.403l-.893.893a1.984 1.984 0 0 0 0 2.806l.893.893c.372.372.581.876.581 1.403v1.262a1.984 1.984 0 0 0 1.984 1.984h1.262c.527 0 1.031.209 1.403.581l.893.893a1.984 1.984 0 0 0 2.806 0l.893-.893a1.985 1.985 0 0 1 1.403-.581h1.262a1.984 1.984 0 0 0 1.984-1.984V15.7c0-.527.209-1.031.581-1.403Z">
                                                    </path>
                                                </svg>
                                                <span>Official Knowledge</span>
                                            </a>
                                            <span th:if="${currentFolderPath}" th:remove="tag">
                                                <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    fill="none" viewBox="0 0 24 24">
                                                    <path stroke="currentColor" stroke-linecap="round"
                                                        stroke-linejoin="round" stroke-width="2" d="m10 16 4-4-4-4" />
                                                </svg>
                                            </span>
                                            <span th:if="${currentFolderPath}" th:each="f, iter : ${currentFolderPath}">
                                                <a th:href="@{/vault-detail(id=${vault.id}, folder=${f.id}, private=${showPrivate} ? 'true' : null, official=${showOfficial} ? 'true' : null)}"
                                                    th:text="${f.name}" th:classappend="${iter.last} ? 'active' : ''"
                                                    class="breadcrumb-link"></a>
                                                <span th:if="${!iter.last}">
                                                    <svg class="w-6 h-6 text-gray-800 dark:text-white"
                                                        aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
                                                        height="24" fill="none" viewBox="0 0 24 24">
                                                        <path stroke="currentColor" stroke-linecap="round"
                                                            stroke-linejoin="round" stroke-width="2"
                                                            d="m10 16 4-4-4-4" />
                                                    </svg>
                                                </span>
                                            </span>
                                        </h3>
                                    </div>

                                    <div th:if="${currentFolderPath}">
                                        <a id="create-knowledge-btn" class="create-knowledge-button" role="button"
                                            style="padding: 10px 15px; background-color: #f3f6fd; border-radius: 10px; cursor: pointer; text-decoration: none; display: inline-block;">
                                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                                xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                                viewBox="0 0 24 24" style="margin-top: -5px;">
                                                <path stroke="currentColor" stroke-linecap="round"
                                                    stroke-linejoin="round" stroke-width="2"
                                                    d="m4.988 19.012 5.41-5.41m2.366-6.424 4.058 4.058-2.03 5.41L5.3 20 4 18.701l3.355-9.494 5.41-2.029Zm4.626 4.625L12.197 6.61 14.807 4 20 9.194l-2.61 2.61Z" />
                                            </svg>
                                            <span style="font-size: 16px; font-weight: 600;">Create Knowledge</span>
                                        </a>
                                    </div>

                                    <div th:if="${showSessions}">
                                        <a id="create-session-btn" class="create-session-button" role="button"
                                            data-toggle="modal" data-target="#createSessionModal"
                                            style="padding: 10px 15px; background-color: #f3f6fd; border-radius: 10px; cursor: pointer; text-decoration: none; display: inline-block;">
                                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                                xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                                viewBox="0 0 24 24" style="margin-top: -5px;">
                                                <path stroke="currentColor" stroke-linecap="round"
                                                    stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7 7V5" />
                                            </svg>
                                            <span style="font-size: 16px; font-weight: 600;">Create Meeting</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card topnav-right">
                        <div class="card-body card-content-right">
                            <ul class="list-inline m-0 p-0 d-flex align-items-center justify-content-around">
                                <!-- Notification Section -->
                                <li class="nav-item nav-icon dropdown" style="margin-right: 10px;">
                                    <a href="#"
                                        class="search-toggle dropdown-toggle nav-icon-1 notification-bell-trigger"
                                        id="dropdownMenuButton002" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                        <i class="notification-bell-wrapper">
                                            <svg width="20" class="notification-bell-icon" id="main-n-02"
                                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                                            </svg>
                                        </i>
                                        <span
                                            class="badge badge-primary count-mail rounded-circle notification-badge">2</span>
                                        <span class="bg-primary "></span>
                                    </a>
                                    <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton002"
                                        style="left: -270px !important; z-index: 1050 !important;">
                                        <div class="card shadow-none m-0 border-0">
                                            <div class="notification-header">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0 font-weight-bold text-dark">
                                                        <i class="las la-bell mr-2 text-primary"></i>Thông báo
                                                    </h6>
                                                    <span
                                                        class="notification-count badge badge-primary rounded-pill">2</span>
                                                </div>
                                            </div>

                                            <div class="card-body p-0">
                                                <div class="notification-container">
                                                    <div id="notification-loading"
                                                        style="display: none; text-align: center; padding: 24px;">
                                                        <div class="spinner-border text-primary" role="status"
                                                            style="width: 2rem; height: 2rem; border-width: 3px;">
                                                            <span class="sr-only">Loading...</span>
                                                        </div>
                                                        <div
                                                            style="margin-top: 12px; font-size: 14px; color: #718096; font-weight: 500;">
                                                            Đang tải thông báo...</div>
                                                    </div>

                                                    <div id="notification-list">
                                                        <!-- Notifications will be dynamically loaded here -->
                                                    </div>

                                                    <div id="no-notifications"
                                                        style="display: none; text-align: center; padding: 32px 20px; color: #a0aec0;">
                                                        <div style="margin-bottom: 12px;">
                                                            <svg width="48" height="48"
                                                                style="opacity: 0.6; color: #cbd5e0;"
                                                                fill="currentColor" viewBox="0 0 24 24">
                                                                <path
                                                                    d="M12 2a4 4 0 0 1 4 4v3.586l.707.707A1 1 0 0 1 16 12v4a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-4a1 1 0 0 1-.293-.707L8.414 10.414A1 1 0 0 1 8 9.586V6a4 4 0 0 1 4-4Z" />
                                                            </svg>
                                                        </div>
                                                        <p
                                                            style="margin: 0; font-size: 15px; font-weight: 500; color: #718096;">
                                                            Không có thông báo nào
                                                        </p>
                                                        <p style="margin: 4px 0 0 0; font-size: 13px; color: #a0aec0;">
                                                            Bạn sẽ nhận được thông báo khi có hoạt động mới
                                                        </p>
                                                    </div>
                                                </div>

                                                <!-- Enhanced Footer -->
                                                <div class="notification-footer text-center p-3"
                                                    style="border-top: 1px solid rgba(226, 232, 240, 0.6);">
                                                    <button class="btn btn-outline-primary btn-sm"
                                                        id="mark-all-read-btn" onclick="markAllNotificationsAsRead()">
                                                        <i class="las la-check-double mr-1"></i>
                                                        Đánh dấu tất cả đã đọc
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <!-- User Profile Section -->
                                <li class="nav-item nav-icon dropdown">
                                    <div class="user-profile-section" id="user-dropdown-toggle">
                                        <div class="profile-picture">
                                            <img th:src="${currentUser.avatar != null and !#strings.isEmpty(currentUser.avatar) ? currentUser.avatar : '/images/avatar/df_avatar.jpg'}"
                                                alt="profile picture">
                                        </div>
                                        <div class="dropdown-menu" id="user-dropdown"
                                            style="min-width: 100px !important; border-radius: 15px !important; left:-40px !important; z-index: 1050 !important;">
                                            <a id="open-profile-modal"
                                                style="display: flex; flex-direction: row; gap: 10px; align-items: center;">
                                                <svg aria-hidden="true" role="graphics-symbol" viewBox="0 0 20 20"
                                                    class="gear"
                                                    style="width: 22px; height: 22px; display: block; fill: rgba(17, 17, 17, 0.836); flex-shrink: 0;">
                                                    <path
                                                        d="M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46">
                                                    </path>
                                                    <path
                                                        d="M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z">
                                                    </path>
                                                </svg>
                                                <span>Profile</span>
                                            </a>
                                            <a href="/auth/log-out"
                                                style="display: flex; flex-direction: row; align-items: center; gap: 8px;">
                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"
                                                    xmlns="http://www.w3.org/2000/svg" data-rtl-flip="" class="icon"
                                                    aria-hidden="true">
                                                    <path
                                                        d="M3.50171 12.6663V7.33333C3.50171 6.64424 3.50106 6.08728 3.53784 5.63704C3.57525 5.17925 3.65463 4.77342 3.84644 4.39681L3.96851 4.17806C4.2726 3.68235 4.70919 3.2785 5.23023 3.01302L5.3728 2.94661C5.7091 2.80238 6.06981 2.73717 6.47046 2.70443C6.9207 2.66764 7.47766 2.66829 8.16675 2.66829H9.16675L9.30054 2.68197C9.60367 2.7439 9.83179 3.0119 9.83179 3.33333C9.83179 3.65476 9.60367 3.92277 9.30054 3.9847L9.16675 3.99837H8.16675C7.45571 3.99837 6.96238 3.99926 6.57886 4.0306C6.297 4.05363 6.10737 4.09049 5.96362 4.14193L5.83374 4.19857C5.53148 4.35259 5.27861 4.58671 5.1023 4.87435L5.03198 5.00032C4.95147 5.15833 4.89472 5.36974 4.86401 5.74544C4.83268 6.12896 4.83179 6.6223 4.83179 7.33333V12.6663C4.83179 13.3772 4.8327 13.8707 4.86401 14.2542C4.8947 14.6298 4.95153 14.8414 5.03198 14.9993L5.1023 15.1263C5.27861 15.4137 5.53163 15.6482 5.83374 15.8021L5.96362 15.8577C6.1074 15.9092 6.29691 15.947 6.57886 15.9701C6.96238 16.0014 7.45571 16.0013 8.16675 16.0013H9.16675L9.30054 16.015C9.6036 16.0769 9.83163 16.345 9.83179 16.6663C9.83179 16.9877 9.60363 17.2558 9.30054 17.3177L9.16675 17.3314H8.16675C7.47766 17.3314 6.9207 17.332 6.47046 17.2952C6.06978 17.2625 5.70912 17.1973 5.3728 17.0531L5.23023 16.9867C4.70911 16.7211 4.27261 16.3174 3.96851 15.8216L3.84644 15.6038C3.65447 15.2271 3.57526 14.8206 3.53784 14.3626C3.50107 13.9124 3.50171 13.3553 3.50171 12.6663ZM13.8035 13.804C13.5438 14.0634 13.1226 14.0635 12.863 13.804C12.6033 13.5443 12.6033 13.1223 12.863 12.8626L13.8035 13.804ZM12.863 6.19661C13.0903 5.96939 13.4409 5.94126 13.699 6.11165L13.8035 6.19661L17.1375 9.52962C17.3969 9.78923 17.3968 10.2104 17.1375 10.4701L13.8035 13.804L13.3337 13.3333L12.863 12.8626L15.0603 10.6654H9.16675C8.79959 10.6654 8.50189 10.3674 8.50171 10.0003C8.50171 9.63306 8.79948 9.33529 9.16675 9.33529H15.0613L12.863 7.13704L12.7781 7.03255C12.6077 6.77449 12.6359 6.42386 12.863 6.19661Z">
                                                    </path>
                                                </svg>
                                                <span>Log out</span>
                                            </a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <!-- Knowledge Metadata Card -->
                        <div id="knowledge-metadata-card" class="card card-block card-stretch"
                            style="margin-bottom: 20px; display: none;">
                            <div class="card-body write-card">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5 class="card-title mb-0">
                                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
                                            viewBox="0 0 24 24" style="margin-right: 8px; margin-top: -3px;">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                        </svg>
                                        <span class="metadata-card-title">Create New Knowledge</span>
                                    </h5>
                                    <div class="d-flex" id="header-buttons-placeholder">
                                    </div>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="knowledge-title" class="form-label"
                                        style="font-weight: 600; color: #495057;">Title <span
                                            class="text-danger">*</span></label>
                                    <input type="text" id="knowledge-title" placeholder="Enter knowledge title..."
                                        class="form-control" required
                                        style="border-radius: 6px; border: 1px solid #ddd; padding: 10px;">
                                </div>

                                <div class="form-group mb-3">
                                    <label for="knowledge-description" class="form-label"
                                        style="font-weight: 600; color: #495057;">Description</label>
                                    <textarea id="knowledge-description"
                                        placeholder="Brief description of the knowledge..." class="form-control"
                                        rows="3"
                                        style="border-radius: 6px; border: 1px solid #ddd; padding:10px 10px;"></textarea>
                                </div>

                                <div class="form-group mb-0">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <label for="knowledge-tag" class="form-label mb-0"
                                            style="font-weight: 600; color: #495057;">Tags</label>
                                        <small class="form-text text-muted mb-0">Press Enter or comma to add
                                            tags</small>
                                    </div>
                                    <div class="tag-input-container">
                                        <input type="text" id="knowledge-tag"
                                            placeholder="Type to search or add tags..." class="form-control"
                                            autocomplete="off"
                                            style="border-radius: 6px; border: 1px solid #ddd; padding: 10px;">
                                        <div id="tag-suggestions" class="tag-suggestions-dropdown"
                                            style="display: none;"></div>
                                    </div>
                                    <div id="selected-tags" class="selected-tags" style="margin-top: 8px;"></div>
                                </div>
                            </div>
                        </div>

                        <div class="collapse" id="collapseMenu">
                            <form id="create-knowledge-form" th:action="@{/vault-detail/create-knowledge}"
                                method="post">
                                <input type="text" id="article-title" value="" style="display:none;" />
                                <div id="form-buttons"
                                    style="position: absolute; top: -60px; right: 15px; z-index: 1000;">
                                    <div class="d-flex">
                                        <button type="button" id="default-close-btn"
                                            class="btn btn-outline-primary btn-sm" data-extra-toggle="toggle"
                                            data-extra-class-show=".show-note-button"
                                            data-extra-class-hide=".hide-note-button">Close</button>
                                        <button type="button" id="save-knowledge-btn"
                                            class="btn btn-primary btn-sm ml-2">Save</button>
                                        <button type="button" id="update-knowledge-btn"
                                            class="btn btn-primary btn-sm ml-2" style="display:none;">Update</button>
                                        <button type="button" id="cancel-edit-btn"
                                            class="btn btn-outline-primary btn-sm" style="display:none;">Cancel</button>
                                    </div>
                                </div>

                                <input type="hidden" id="vaultId" name="vaultId" th:value="${vault.id}" />
                                <input type="hidden" id="selectedFolderId" name="folderId" />
                                <input type="hidden" id="knowledge-title-hidden" name="title" value="" />
                                <input type="hidden" id="knowledge-content" name="content" value="" />
                                <input type="hidden" id="hidden-knowledge-description" name="description" value="" />
                                <input type="hidden" id="hidden-knowledge-tag" name="tags" value="" />
                                <input type="hidden" id="knowledgeId" name="knowledgeId" value="" />
                                <input type="hidden" id="editor-mode" value="view" />
                                <div class="card card-block card-stretch">
                                    <div class="card-body write-card">
                                        <div class="container-fluid collapse-fluid">
                                            <div class="row">
                                                <div class="col-md-12 col-lg-12 p-0">
                                                    <div
                                                        class="card card-transparent card-block card-stretch event-note">
                                                        <div class="card-body px-0 bukmark">
                                                            <div id="toolbar-container"
                                                                class="d-flex align-items-center justify-content-center pb-2 mb-2 border-bottom px-3 ql-toolbar ql-snow">

                                                                <div
                                                                    class="d-flex align-items-center justify-content-center w-100">
                                                                    <div
                                                                        class="d-flex flex-wrap justify-content-center">
                                                                        <span class="ql-formats mr-2">
                                                                            <select class="ql-size"></select>
                                                                            <select class="ql-font"></select>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <button class="ql-bold"></button>
                                                                            <button class="ql-italic"></button>
                                                                            <button class="ql-underline"></button>
                                                                            <button class="ql-strike"></button>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <select class="ql-color"></select>
                                                                            <select class="ql-background"></select>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <button class="ql-script"
                                                                                value="sub"></button>
                                                                            <button class="ql-script"
                                                                                value="super"></button>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <button class="ql-header"
                                                                                value="1"></button>
                                                                            <button class="ql-header"
                                                                                value="2"></button>
                                                                            <button class="ql-blockquote"></button>
                                                                            <button class="ql-code-block"></button>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <button class="ql-list"
                                                                                value="ordered"></button>
                                                                            <button class="ql-list"
                                                                                value="bullet"></button>
                                                                            <button class="ql-indent"
                                                                                value="-1"></button>
                                                                            <button class="ql-indent"
                                                                                value="+1"></button>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <button class="ql-direction"
                                                                                value="rtl"></button>
                                                                            <select class="ql-align"></select>
                                                                        </span>
                                                                        <span class="ql-formats mr-2">
                                                                            <button class="ql-link"></button>
                                                                            <button class="ql-image"></button>
                                                                            <button class="ql-video"></button>
                                                                            <button class="ql-formula"></button>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-clean"></button>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div id="editor"
                                                                style="min-height: 585px; padding: 0 15px;">
                                                                <p></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-lg-12" id="knowledge-list-wrapper">
                        <div class="card card-block card-stretch" style="margin-bottom: 0px !important;">
                            <div class="card-body custom-notes-space">
                                <div class="iq-tab-content">
                                    <div class="d-flex flex-wrap align-items-top justify-content-between"
                                        style="padding-left: 30px; padding-right: 30px; padding-top: 20px;">
                                        <ul class="d-flex nav nav-pills text-center note-tab mb-3" id="note-pills-tab"
                                            role="tablist" th:if="${showSessions}">
                                            <li class="nav-item">
                                                <a class="nav-link home active show" data-toggle="pill"
                                                    data-init="calendar-view" href="#note3" role="tab"
                                                    aria-selected="true">Calendar View</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link home" data-toggle="pill"
                                                    data-init="upcoming-sessions" href="#note1" role="tab"
                                                    aria-selected="false">Upcoming Meetings</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link home" data-toggle="pill" data-init="past-sessions"
                                                    href="#note2" role="tab" aria-selected="false">Past Meetings</a>
                                            </li>
                                        </ul>

                                        <ul class="d-flex nav nav-pills text-center note-tab mb-3" id="note-pills-tab"
                                            role="tablist" th:unless="${showSessions}"
                                            th:classappend="${showBin} ? 'invisible-retained-space' : ''">
                                            <li class="nav-item">
                                                <a class="nav-link home" data-toggle="pill" data-init="note"
                                                    href="#note1" role="tab" aria-selected="false"
                                                    th:classappend="${showReject} ? '' : 'active show'"
                                                    th:text="${showPrivate} ? 'All' : 'Approval'">
                                                    All
                                                </a>
                                            </li>

                                            <li class="nav-item" th:if="${showPrivate}">
                                                <a class="nav-link home" data-toggle="pill" data-init="draft-note"
                                                    href="#note4" role="tab" aria-selected="false">Draft</a>
                                            </li>

                                            <li class="nav-item">
                                                <a class="nav-link home" data-toggle="pill" data-init="shared-note"
                                                    href="#note2" role="tab" aria-selected="true">
                                                    <span th:if="${showPrivate}">Submit to review</span>
                                                    <span th:unless="${showPrivate}">Pending approval</span>
                                                </a>
                                            </li>

                                            <li class="nav-item" th:unless="${hideApprovalTab}">
                                                <a class="nav-link home" data-toggle="pill" data-init="pin-note"
                                                    href="#note3" role="tab" aria-selected="false">Approved</a>
                                            </li>

                                            <li class="nav-item">
                                                <a class="nav-link home" data-toggle="pill" data-init="reject-note"
                                                    href="#note5" th:classappend="${showReject} ? 'active show' : ''"
                                                    role="tab" aria-selected="false">
                                                    Reject
                                                </a>
                                            </li>
                                        </ul>

                                        <div class="media align-items-top iq-grid" th:if="${showSessions != true}">
                                            <div class="list-grid-toggle cursor-pointer">
                                                <span class="icon active i-grid rounded"><i
                                                        class="ri-layout-grid-line font-size-20"></i></span>
                                                <span class="icon active i-list rounded"><i
                                                        class="ri-list-check font-size-20"></i></span>
                                                <span class="label label-list">List</span>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="note-content tab-content">
                                        <div id="note1" class="tab-pane fade" th:if="${showSessions}">
                                            <div class="row">
                                                <div class="col-lg-4 col-md-6 mb-3"
                                                    th:each="upcomingSession : ${upcomingSessions}">
                                                    <div class="card card-block"
                                                        style="border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); border: 1px solid #e5e7eb;">
                                                        <div class="card-body" style="padding: 16px;">
                                                            <div
                                                                class="d-flex justify-content-between align-items-start mb-2">
                                                                <h5 class="card-title mb-1"
                                                                    style="font-size: 1.25rem; font-weight: 600; color: #1f2937;"
                                                                    th:text="${upcomingSession.title}">
                                                                    React Best Practices Workshop</h5>

                                                            </div>
                                                            <p class="card-text mb-2"
                                                                style="color: #6b7280; font-size: 14px; line-height: 1.4;"
                                                                th:text="${upcomingSession.description}">
                                                                Deep dive into React patterns and performance
                                                                optimization</p>
                                                            <div class="mb-2">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between">
                                                                    <div class="d-flex align-items-center">
                                                                        <svg width="16" height="16" fill="currentColor"
                                                                            viewBox="0 0 24 24"
                                                                            style="color: #6b7280; margin-right: 6px;">
                                                                            <path
                                                                                d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                                                                        </svg>
                                                                        <span style="color: #374151; font-size: 13px;"
                                                                            th:text="${#temporals.format(upcomingSession.startTime, 'EEEE, MMMM dd, yyyy')}"></span>
                                                                    </div>
                                                                    <div class="d-flex align-items-center">
                                                                        <svg width="16" height="16" fill="currentColor"
                                                                            viewBox="0 0 24 24"
                                                                            style="color: #6b7280; margin-right: 6px;">
                                                                            <path
                                                                                d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z" />
                                                                        </svg>
                                                                        <span style="color: #374151; font-size: 13px;"
                                                                            th:text="${#temporals.format(upcomingSession.startTime, 'HH:mm') + ' (' + upcomingSession.duration + 'min)'}">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="mb-2">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between">
                                                                    <div class="d-flex align-items-center"
                                                                        style="margin-bottom: 10px;">
                                                                        <img src="/images/avatar/df_avatar.jpg"
                                                                            alt="huydx"
                                                                            style="width: 26px; height: 26px; border-radius: 50%; margin-right: 6px;">
                                                                        <div>
                                                                            <div
                                                                                style="font-size: 13px; font-weight: 500; color: #374151;">
                                                                                <span
                                                                                    th:text="${upcomingSession.instructor != null ? upcomingSession.instructor.email : 'Unknown'}"></span>
                                                                            </div>
                                                                            <div
                                                                                style="font-size: 11px; color: #6b7280; margin-top: -10px;">
                                                                                <span
                                                                                    th:text="${upcomingSession.instructor != null ? upcomingSession.instructor.position : 'Unknown'}"></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="mb-4"
                                                                th:if="${upcomingSessionsWithTags != null}">
                                                                <div class="d-flex flex-wrap" style="gap: 5px;">
                                                                    <!-- Dynamic tags from database -->
                                                                    <span
                                                                        th:each="tag : ${upcomingSessionsWithTags[__${upcomingSessionStat.index}__]['tags']}"
                                                                        class="badge"
                                                                        style="background-color: #dbeafe; color: #1d4ed8; padding: 3px 8px; border-radius: 15px; font-size: 11px;"
                                                                        th:text="${tag.name}">Tag</span>
                                                                    <!-- Show "No tags" if no tags available -->
                                                                    <span
                                                                        th:if="${upcomingSessionsWithTags[__${upcomingSessionStat.index}__]['tags'] == null or #lists.isEmpty(upcomingSessionsWithTags[__${upcomingSessionStat.index}__]['tags'])}"
                                                                        class="badge"
                                                                        style="background-color: #f3f4f6; color: #6b7280; padding: 3px 8px; border-radius: 15px; font-size: 11px; font-style: italic;">No
                                                                        tags</span>
                                                                </div>
                                                            </div>

                                                            <div class="d-flex" style="gap: 10px;">
                                                                <button
                                                                    class="btn btn-outline-primary btn-sm view-session-details"
                                                                    style="border-radius: 15px; font-size: 12px; padding: 5px 10px;"
                                                                    th:data-session-id="${upcomingSession.id}"
                                                                    th:data-session-title="${upcomingSession.title}"
                                                                    th:data-session-description="${upcomingSession.description}"
                                                                    th:data-session-start-time="${#temporals.format(upcomingSession.startTime, 'EEEE, MMMM dd, yyyy HH:mm')}"
                                                                    th:data-session-duration="${upcomingSession.duration}"
                                                                    th:data-session-instructor="${upcomingSession.instructor != null ? (upcomingSession.instructor.email != null and !#strings.isEmpty(upcomingSession.instructor.email) ? upcomingSession.instructor.email : (upcomingSession.instructor.name != null and !#strings.isEmpty(upcomingSession.instructor.name) ? upcomingSession.instructor.name : (upcomingSession.instructor.googleFirstName != null and upcomingSession.instructor.googleFamilyName != null ? upcomingSession.instructor.googleFirstName + ' ' + upcomingSession.instructor.googleFamilyName : upcomingSession.instructor.username))) : 'Unknown'}"
                                                                    th:data-session-meeting-link="${upcomingSession.meetingLink}">
                                                                    <svg width="14" height="14" fill="currentColor"
                                                                        viewBox="0 0 24 24" style="margin-right: 3px;">
                                                                        <path
                                                                            d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                                                                    </svg>
                                                                    View Details
                                                                </button>
                                                                <a class="btn btn-dark btn-sm upcoming-join-btn"
                                                                    th:href="${upcomingSession.meetingLink != null and !#strings.isEmpty(upcomingSession.meetingLink) and upcomingSession.meetingLink != 'null' ? upcomingSession.meetingLink : '#'}"
                                                                    th:style="${upcomingSession.meetingLink != null and !#strings.isEmpty(upcomingSession.meetingLink) and upcomingSession.meetingLink != 'null' ? 'border-radius: 15px; background-color: #1f2937; font-size: 12px; padding: 5px 10px;' : 'border-radius: 15px; background-color: #6b7280; font-size: 12px; padding: 5px 10px; opacity: 0.6; cursor: not-allowed;'}"
                                                                    th:data-is-offline="${upcomingSession.meetingLink == null or #strings.isEmpty(upcomingSession.meetingLink) or upcomingSession.meetingLink == 'null'}">
                                                                    <svg width="14" height="14" fill="currentColor"
                                                                        viewBox="0 0 24 24" style="margin-right: 3px;"
                                                                        th:style="${upcomingSession.meetingLink != null and !#strings.isEmpty(upcomingSession.meetingLink) and upcomingSession.meetingLink != 'null' ? 'margin-right: 3px;' : 'margin-right: 3px;'}">
                                                                        <path
                                                                            th:if="${upcomingSession.meetingLink != null and !#strings.isEmpty(upcomingSession.meetingLink) and upcomingSession.meetingLink != 'null'}"
                                                                            d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C0,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" />
                                                                        <path
                                                                            th:if="${upcomingSession.meetingLink == null or #strings.isEmpty(upcomingSession.meetingLink) or upcomingSession.meetingLink == 'null'}"
                                                                            d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" />
                                                                    </svg>
                                                                    <span
                                                                        th:text="${upcomingSession.meetingLink != null and !#strings.isEmpty(upcomingSession.meetingLink) and upcomingSession.meetingLink != 'null' ? 'Join Meeting' : 'Offline'}">Join
                                                                        Meeting</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Past Sessions Tab -->
                                        <div id="note2" class="tab-pane fade" th:if="${showSessions}">
                                            <div class="row">
                                                <!-- API Security Best Practices -->
                                                <div class="col-lg-4 col-md-6 mb-3"
                                                    th:each="pastSessions : ${pastSessions}">
                                                    <div class="card card-block"
                                                        style="border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); border: 1px solid #e5e7eb;">
                                                        <div class="card-body" style="padding: 16px;">
                                                            <div
                                                                class="d-flex justify-content-between align-items-start mb-2">
                                                                <h5 class="card-title mb-1"
                                                                    style="font-size: 1.25rem; font-weight: 600; color: #1f2937;"
                                                                    th:text="${pastSessions.title}">
                                                                    API Security Best Practices</h5>
                                                                <div class="dropdown">
                                                                    <button class="btn btn-sm" type="button"
                                                                        data-toggle="dropdown"
                                                                        style="background: none; border: none; color: #6b7280; padding: 2px;">
                                                                        <svg width="18" height="18" fill="currentColor"
                                                                            viewBox="0 0 24 24">
                                                                            <path
                                                                                d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                                                                        </svg>
                                                                    </button>
                                                                    <div class="dropdown-menu dropdown-menu-right">
                                                                        <a class="dropdown-item edit-session-btn"
                                                                            href="#" style="color: #059669;"
                                                                            th:data-session-id="${pastSessions.id}"
                                                                            th:data-session-title="${pastSessions.title}"
                                                                            th:data-session-description="${pastSessions.description}"
                                                                            th:data-session-start-date="${#temporals.format(pastSessions.startTime, 'yyyy-MM-dd')}"
                                                                            th:data-session-start-time="${#temporals.format(pastSessions.startTime, 'HH:mm')}"
                                                                            th:data-session-end-date="${pastSessions.endTime != null ? #temporals.format(pastSessions.endTime, 'yyyy-MM-dd') : #temporals.format(pastSessions.startTime, 'yyyy-MM-dd')}"
                                                                            th:data-session-end-time="${pastSessions.endTime != null ? #temporals.format(pastSessions.endTime, 'HH:mm') : ''}"
                                                                            th:data-session-duration="${pastSessions.duration}"
                                                                            th:data-session-instructor-id="${pastSessions.instructor != null ? pastSessions.instructor.id : ''}"
                                                                            th:data-session-instructor-name="${pastSessions.instructor != null ? (pastSessions.instructor.name != null and !#strings.isEmpty(pastSessions.instructor.name) ? pastSessions.instructor.name : (pastSessions.instructor.googleFirstName != null and pastSessions.instructor.googleFamilyName != null ? pastSessions.instructor.googleFirstName + ' ' + pastSessions.instructor.googleFamilyName : pastSessions.instructor.username)) : 'Unknown'}"
                                                                            th:data-session-meeting-link="${pastSessions.meetingLink}">
                                                                            <i class="las la-edit mr-2"></i>Edit
                                                                        </a>
                                                                        <a class="dropdown-item delete-session-btn"
                                                                            href="#" style="color: #ef4444;"
                                                                            th:data-session-id="${pastSessions.id}"
                                                                            th:data-session-title="${pastSessions.title}">
                                                                            <i class="las la-trash mr-2"></i>Delete
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <p class="card-text mb-2"
                                                                style="color: #6b7280; font-size: 14px; line-height: 1.4;"
                                                                th:text="${pastSessions.description}">
                                                                Comprehensive guide to securing REST APIs and preventing
                                                                common vulnerabilities</p>
                                                            <div class="mb-2">
                                                                <div class="d-flex align-items-center justify-content-between"
                                                                    style="margin-bottom: 10px;">
                                                                    <div class="d-flex align-items-center">
                                                                        <svg width="16" height="16" fill="currentColor"
                                                                            viewBox="0 0 24 24"
                                                                            style="color: #6b7280; margin-right: 6px;">
                                                                            <path
                                                                                d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                                                                        </svg>
                                                                        <span style="color: #374151; font-size: 13px;"
                                                                            th:text="${#temporals.format(pastSessions.startTime, 'EEEE, MMMM dd, yyyy')}"></span>
                                                                    </div>
                                                                    <div class="d-flex align-items-center">
                                                                        <svg width="16" height="16" fill="currentColor"
                                                                            viewBox="0 0 24 24"
                                                                            style="color: #6b7280; margin-right: 6px;">
                                                                            <path
                                                                                d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z" />
                                                                        </svg>
                                                                        <span style="color: #374151; font-size: 13px;"
                                                                            th:text="${#temporals.format(pastSessions.startTime, 'HH:mm') + ' (' + pastSessions.duration + 'min)'}">
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="mb-2">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between">
                                                                    <div class="d-flex align-items-center">
                                                                        <img src="/images/avatar/df_avatar.jpg"
                                                                            alt="Duong Blue"
                                                                            style="width: 26px; height: 26px; border-radius: 50%; margin-right: 6px;">
                                                                        <div>
                                                                            <div
                                                                                style="font-size: 13px; font-weight: 500; color: #374151;">
                                                                                <span
                                                                                    th:text="${pastSessions.instructor != null ? pastSessions.instructor.email : 'Unknown'}"></span>
                                                                            </div>
                                                                            <div
                                                                                style="font-size: 11px; color: #6b7280; margin-top: -10px;">
                                                                                <span
                                                                                    th:text="${pastSessions.instructor != null ? pastSessions.instructor.position : 'Unknown'}"></span>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="mb-2" th:if="${pastSessionsWithTags != null}">
                                                                <div class="d-flex flex-wrap" style="gap: 5px;">
                                                                    <!-- Dynamic tags from database -->
                                                                    <span
                                                                        th:each="tag : ${pastSessionsWithTags[__${pastSessionsStat.index}__]['tags']}"
                                                                        class="badge"
                                                                        style="background-color: #fef3c7; color: #92400e; padding: 3px 8px; border-radius: 15px; font-size: 11px;"
                                                                        th:text="${tag.name}">Tag</span>
                                                                    <!-- Show "No tags" if no tags available -->
                                                                    <span
                                                                        th:if="${pastSessionsWithTags[__${pastSessionsStat.index}__]['tags'] == null or #lists.isEmpty(pastSessionsWithTags[__${pastSessionsStat.index}__]['tags'])}"
                                                                        class="badge"
                                                                        style="background-color: #f3f4f6; color: #6b7280; padding: 3px 8px; border-radius: 15px; font-size: 11px; font-style: italic;">No
                                                                        tags</span>
                                                                </div>
                                                            </div>

                                                            <div class="d-flex gap-2">
                                                                <button
                                                                    class="btn btn-outline-primary btn-sm view-session-details"
                                                                    style="border-radius: 15px; font-size: 12px; padding: 5px 10px;"
                                                                    th:data-session-id="${pastSessions.id}"
                                                                    th:data-session-title="${pastSessions.title}"
                                                                    th:data-session-description="${pastSessions.description}"
                                                                    th:data-session-start-time="${#temporals.format(pastSessions.startTime, 'EEEE, MMMM dd, yyyy HH:mm')}"
                                                                    th:data-session-duration="${pastSessions.duration}"
                                                                    th:data-session-instructor="${pastSessions.instructor != null ? (pastSessions.instructor.name != null and !#strings.isEmpty(pastSessions.instructor.name) ? pastSessions.instructor.name : (pastSessions.instructor.googleFirstName != null and pastSessions.instructor.googleFamilyName != null ? pastSessions.instructor.googleFirstName + ' ' + pastSessions.instructor.googleFamilyName : pastSessions.instructor.username)) : 'Unknown'}"
                                                                    th:data-session-meeting-link="${pastSessions.meetingLink}">
                                                                    <svg width="14" height="14" fill="currentColor"
                                                                        viewBox="0 0 24 24" style="margin-right: 3px;">
                                                                        <path
                                                                            d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                                                                    </svg>
                                                                    View Details
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="note3" class="tab-pane fade active show" th:if="${showSessions}">
                                            <div style="padding: 0px 20px;">
                                                <div class="d-flex justify-content-between align-items-center mb-4">
                                                    <div>
                                                        <h4 id="calendarCurrentMonth"
                                                            style="color: #1f2937; font-weight: 600; margin-bottom: 4px;">
                                                            January 2025</h4>
                                                        <p id="calendarCurrentWeek"
                                                            style="color: #6b7280; font-size: 14px; margin: 0;">Week of
                                                            January 13-19, 2025</p>
                                                    </div>
                                                    <div class="dropdown">
                                                        <button id="calendarWeekButton"
                                                            class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                                            type="button" data-toggle="dropdown"
                                                            style="border-radius: 6px; font-size: 13px; padding: 6px 12px;">
                                                            <svg width="14" height="14" fill="currentColor"
                                                                viewBox="0 0 24 24" style="margin-right: 6px;">
                                                                <path
                                                                    d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                                                            </svg>
                                                            Week 3, 2025
                                                        </button>
                                                        <div id="calendarWeekDropdown"
                                                            class="dropdown-menu dropdown-menu-right"
                                                            style="max-height: 300px; overflow-y: auto; min-width: 200px;">
                                                            <!-- Dynamic weeks will be populated here -->
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="card calendar-24h-view"
                                                    style="border-radius: 8px; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                                    <div class="card-body" style="padding: 0;">
                                                        <div class="d-flex">
                                                            <div class="calendar-time-column"
                                                                style="width: 80px; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                <div class="calendar-header-sticky"
                                                                    style="height: 60px; border-bottom: 1px solid #d1d5db; display: flex; align-items: center; justify-content: center; position: sticky; top: 0; z-index: 15; background: #f9fafb;">
                                                                    <svg width="16" height="16" fill="currentColor"
                                                                        viewBox="0 0 24 24" style="color: #6b7280;">
                                                                        <path
                                                                            d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z" />
                                                                    </svg>
                                                                </div>
                                                                <div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">00:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">01:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">02:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">03:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">04:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">05:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">06:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">07:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">08:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">09:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">10:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">11:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">12:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">13:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">14:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">15:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">16:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">17:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">18:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">19:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">20:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">21:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">22:00</span>
                                                                    </div>
                                                                    <div
                                                                        style="height: 80px; display: flex; align-items: flex-start; justify-content: center; border-bottom: 1px solid #d1d5db; padding-top: 2px;">
                                                                        <span
                                                                            style="font-size: 11px; color: #6b7280; font-weight: 500;">23:00</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- Calendar Days -->
                                                            <div style="flex: 1;">
                                                                <!-- Days Header -->
                                                                <div class="row no-gutters calendar-header-sticky"
                                                                    style="border-bottom: 1px solid #d1d5db; height: 60px; position: sticky; top: 0; z-index: 15; background: white;">
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            MON</div>
                                                                        <div id="calendar-day-0"
                                                                            style="font-size: 18px; font-weight: 600; color: #1f2937;">
                                                                            13</div>
                                                                    </div>
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            TUE</div>
                                                                        <div id="calendar-day-1"
                                                                            style="font-size: 18px; font-weight: 600; color: #1f2937;">
                                                                            14</div>
                                                                    </div>
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            WED</div>
                                                                        <div id="calendar-day-2"
                                                                            style="font-size: 18px; font-weight: 600; color: #3b82f6;">
                                                                            15</div>
                                                                    </div>
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            THU</div>
                                                                        <div id="calendar-day-3"
                                                                            style="font-size: 18px; font-weight: 600; color: #1f2937;">
                                                                            16</div>
                                                                    </div>
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            FRI</div>
                                                                        <div id="calendar-day-4"
                                                                            style="font-size: 18px; font-weight: 600; color: #1f2937;">
                                                                            17</div>
                                                                    </div>
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb; border-right: 1px solid #e5e7eb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            SAT</div>
                                                                        <div id="calendar-day-5"
                                                                            style="font-size: 18px; font-weight: 600; color: #1f2937;">
                                                                            18</div>
                                                                    </div>
                                                                    <div class="col"
                                                                        style="padding: 0px 8px; text-align: center; background-color: #f9fafb;">
                                                                        <div
                                                                            style="font-weight: 600; font-size: 12px; color: #6b7280; margin-bottom: 2px;">
                                                                            SUN</div>
                                                                        <div id="calendar-day-6"
                                                                            style="font-size: 18px; font-weight: 600; color: #1f2937;">
                                                                            19</div>
                                                                    </div>
                                                                </div>

                                                                <!-- Calendar Body with Time Grid -->
                                                                <div class="row no-gutters" style="position: relative;">
                                                                    <!-- Time Grid Lines -->
                                                                    <div
                                                                        style="position: absolute; top: 0; left: 0; right: 0; height: 1920px; pointer-events: none;">
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px solid #d1d5db;">
                                                                        </div>
                                                                        <div
                                                                            style="height: 40px; border-bottom: 1px dotted #e5e7eb;">
                                                                        </div>
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; border-right: 1px solid #e5e7eb; position: relative; min-height: 1920px;">
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; border-right: 1px solid #e5e7eb; position: relative; min-height: 1920px;">
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; border-right: 1px solid #e5e7eb; position: relative; min-height: 1920px;">
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; border-right: 1px solid #e5e7eb; position: relative; min-height: 1920px;">
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; border-right: 1px solid #e5e7eb; position: relative; min-height: 1920px;">
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; border-right: 1px solid #e5e7eb; position: relative; min-height: 1920px;">
                                                                    </div>

                                                                    <div class="col"
                                                                        style="padding: 0; position: relative; min-height: 1920px;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="note1" class="tab-pane fade" th:unless="${showSessions}"
                                            th:classappend="${showReject} ? '' : 'active show'">
                                            <div class="empty-vault-box" th:if="${#lists.isEmpty(knowledgeItems)}">
                                                <svg class="ant-empty-img-simple" width="64" height="41"
                                                    viewBox="0 0 64 41" xmlns="http://www.w3.org/2000/svg"
                                                    style="margin-bottom: 16px;">
                                                    <g transform="translate(0 1)" fill="none" fill-rule="evenodd">
                                                        <ellipse class="ant-empty-img-simple-ellipse" cx="32" cy="33"
                                                            rx="32" ry="7" fill="#F5F5F7"></ellipse>
                                                        <g class="ant-empty-img-simple-g" fill-rule="nonzero">
                                                            <path
                                                                d="M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"
                                                                fill="#aeb8c2"></path>
                                                            <path
                                                                d="M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z"
                                                                class="ant-empty-img-simple-path" fill="#f5f5f7"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                                <div class="empty-vault-text">No data</div>
                                            </div>
                                            <div class="icon active animate__animated animate__fadeIn i-grid">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-6" th:each="item : ${knowledgeItems}">
                                                        <div class="card card-block card-stretch card-height note-detail"
                                                            th:data-knowledge-id="${item.id}"
                                                            th:classappend="${item.approvalStatus.name() == 'DRAFT' ? ' card-bottom-border-info' :
                                                                            (item.approvalStatus.name() == 'PENDING_APPROVAL' ? ' card-bottom-border-warning' :
                                                                            (item.approvalStatus.name() == 'APPROVED' ? ' card-bottom-border-success' : 
                                                                            (item.approvalStatus.name() == 'REJECTED' ? ' card-bottom-border-danger' : ' card-bottom-border-secondary')))}">
                                                            <div
                                                                class="card-header d-flex justify-content-between pb-1">
                                                                <div class="icon iq-icon-box-2 rounded"
                                                                    th:classappend="${item.approvalStatus.name() == 'DRAFT' ? ' icon-border-info' :
                                                                            (item.approvalStatus.name() == 'PENDING_APPROVAL' ? ' icon-border-warning' :
                                                                            (item.approvalStatus.name() == 'APPROVED' ? ' icon-border-success' : 
                                                                            (item.approvalStatus.name() == 'REJECTED' ? ' icon-border-danger' : ' icon-border-secondary')))}"
                                                                    th:switch="${item.approvalStatus.name()}">

                                                                    <svg th:case="'DRAFT'" width="23" height="23"
                                                                        xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z">
                                                                        </path>
                                                                    </svg>

                                                                    <svg th:case="'PENDING_APPROVAL'" width="23"
                                                                        height="23" xmlns="http://www.w3.org/2000/svg"
                                                                        fill="none" viewBox="0 0 24 24"
                                                                        stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
                                                                        </path>
                                                                    </svg>

                                                                    <svg th:case="'APPROVED'" width="23" height="23"
                                                                        xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z">
                                                                        </path>
                                                                    </svg>

                                                                    <svg th:case="'REJECTED'" width="23" height="23"
                                                                        xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M6 18L18 6M6 6l12 12">
                                                                        </path>
                                                                    </svg>

                                                                    <svg th:case="*" width="23" height="23"></svg>
                                                                </div>


                                                                <div
                                                                    class="card-header-toolbar d-flex align-items-center">
                                                                    <div class="dropdown">
                                                                        <span class="dropdown-toggle dropdown-bg"
                                                                            id="note-dropdownMenuButton4"
                                                                            data-toggle="dropdown" aria-expanded="false"
                                                                            role="button">
                                                                            <i class="ri-more-fill"></i>
                                                                        </span>

                                                                        <div class="dropdown-menu dropdown-menu-right"
                                                                            aria-labelledby="note-dropdownMenuButton4">
                                                                            <th:block th:unless="${showBin}">
                                                                                <!-- Card DRAFT -->
                                                                                <th:block
                                                                                    th:if="${item.approvalStatus.name() == 'DRAFT'}">
                                                                                    <th:block
                                                                                        th:if="${userRole == 'BUILDER' or userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-eye mr-3"></i>View</a>
                                                                                        <a href="#"
                                                                                            class="dropdown-item edit-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-pen mr-3"></i>Edit
                                                                                        </a>
                                                                                        <a href="#"
                                                                                            class="dropdown-item move-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            th:data-approval-status="${item.approvalStatus}">
                                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                width="16" height="16"
                                                                                                fill="currentColor"
                                                                                                class="bi bi-arrows-move"
                                                                                                viewBox="0 0 16 16"
                                                                                                style="margin-right: 3px;">
                                                                                                <path
                                                                                                    fill-rule="evenodd"
                                                                                                    d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10M.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8" />
                                                                                            </svg>
                                                                                            Move
                                                                                        </a>
                                                                                        <form
                                                                                            th:action="@{/vault-detail/submit-for-approval}"
                                                                                            method="post"
                                                                                            style="display:inline;">
                                                                                            <input type="hidden"
                                                                                                name="vaultId"
                                                                                                th:value="${vault.id}" />
                                                                                            <input type="hidden"
                                                                                                name="folderId"
                                                                                                th:value="${item.folder?.id}" />
                                                                                            <input type="hidden"
                                                                                                name="knowledgeId"
                                                                                                th:value="${item.id}" />
                                                                                            <button
                                                                                                class="dropdown-item"
                                                                                                type="submit"
                                                                                                style="color: #007bff;">
                                                                                                <i
                                                                                                    class="las la-paper-plane mr-3"></i>Submit
                                                                                                for Approval
                                                                                            </button>
                                                                                        </form>
                                                                                        <button
                                                                                            class="dropdown-item delete-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-trash-alt mr-3"></i>Delete</button>
                                                                                    </th:block>
                                                                                </th:block>

                                                                                <!-- Card PENDING_APPROVED -->
                                                                                <th:block
                                                                                    th:if="${item.approvalStatus.name() == 'PENDING_APPROVAL'}">
                                                                                    <th:block
                                                                                        th:if="${userRole == 'BUILDER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-eye mr-3"></i>View</a>
                                                                                        <!-- <button
                                                                                            class="dropdown-item withdraw-btn"><i
                                                                                                class="las la-undo mr-3"></i>Withdraw
                                                                                        </button> -->
                                                                                        <button type="button"
                                                                                            class="dropdown-item withdraw-trigger-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-vault-id="${vault.id}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            th:data-knowledge-title="${item.name}">
                                                                                            <i
                                                                                                class="las la-undo mr-3"></i>Withdraw
                                                                                        </button>
                                                                                    </th:block>
                                                                                    <th:block
                                                                                        th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}">
                                                                                            <i
                                                                                                class="las la-eye mr-3"></i>View
                                                                                        </a>
                                                                                        <a href="#"
                                                                                            class="dropdown-item edit-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}">
                                                                                            <i
                                                                                                class="las la-pen mr-3"></i>Edit
                                                                                        </a>

                                                                                        <button
                                                                                            th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}"
                                                                                            class="dropdown-item approve-knowledge-btn"
                                                                                            type="button"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-vault-id="${vault.id}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            style="color: green;"
                                                                                            data-approval-action="approve">
                                                                                            <i
                                                                                                class="las la-check mr-3"></i>
                                                                                            Approve
                                                                                        </button>
                                                                                        <button
                                                                                            th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}"
                                                                                            class="dropdown-item reject-knowledge-btn"
                                                                                            type="button"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            style="color: red;"
                                                                                            data-approval-action="reject">
                                                                                            <i
                                                                                                class="las la-times mr-3"></i>
                                                                                            Reject
                                                                                        </button>
                                                                                    </th:block>
                                                                                </th:block>

                                                                                <!-- Card APPROVED -->
                                                                                <th:block
                                                                                    th:if="${item.approvalStatus.name() == 'APPROVED'}">
                                                                                    <th:block
                                                                                        th:if="${userRole == 'EXPLORER' or userRole == 'BUILDER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-eye mr-3"></i>View</a>
                                                                                    </th:block>
                                                                                    <th:block
                                                                                        th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-eye mr-3"></i>View</a>
                                                                                        <a href="#"
                                                                                            class="dropdown-item edit-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-pen mr-3"></i>Edit</a>
                                                                                        <a href="#"
                                                                                            class="dropdown-item move-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            th:data-approval-status="${item.approvalStatus}">
                                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                width="16" height="16"
                                                                                                fill="currentColor"
                                                                                                class="bi bi-arrows-move"
                                                                                                viewBox="0 0 16 16"
                                                                                                style="margin-right: 3px;">
                                                                                                <path
                                                                                                    fill-rule="evenodd"
                                                                                                    d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10M.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8" />
                                                                                            </svg>
                                                                                            Move
                                                                                        </a>
                                                                                    </th:block>
                                                                                </th:block>

                                                                            </th:block>

                                                                            <!-- Card REJECTED -->
                                                                            <th:block
                                                                                th:if="${item.approvalStatus.name() == 'REJECTED'}">
                                                                                <a href="#"
                                                                                    class="dropdown-item view-knowledge-btn"
                                                                                    th:data-knowledge-id="${item.id}">
                                                                                    <i class="las la-eye mr-3"></i>View
                                                                                </a>
                                                                                <button
                                                                                    class="dropdown-item delete-knowledge-btn"
                                                                                    type="button"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-folder-id="${item.folder?.id}">
                                                                                    <i
                                                                                        class="las la-trash-alt mr-3"></i>Delete
                                                                                </button>
                                                                            </th:block>

                                                                            <th:block th:if="${showBin}">
                                                                                <form
                                                                                    th:action="@{/vault-detail/restore-knowledge}"
                                                                                    method="post"
                                                                                    style="display:inline;">
                                                                                    <input type="hidden"
                                                                                        th:name="vaultId"
                                                                                        th:value="${vault.id}" />
                                                                                    <input type="hidden"
                                                                                        th:name="folderId"
                                                                                        th:value="${item.folder?.id}" />
                                                                                    <input type="hidden"
                                                                                        th:name="knowledgeId"
                                                                                        th:value="${item.id}" />
                                                                                    <button class="dropdown-item"
                                                                                        type="submit">
                                                                                        <i
                                                                                            class="las la-undo-alt mr-3"></i>
                                                                                        Restore
                                                                                    </button>
                                                                                </form>
                                                                                <button
                                                                                    class="dropdown-item delete-permanent-btn"
                                                                                    type="button"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-folder-id="${item.folder?.id}">
                                                                                    <i class="las la-trash mr-3"></i>
                                                                                    Delete Permanent
                                                                                </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-body rounded">
                                                                <h4 class="card-title" th:text="${item.name}">name</h4>
                                                                <p class="mb-3 card-description short"
                                                                    th:text="${item.description}">description</p>

                                                                <!-- Review Status Indicator for PENDING_APPROVAL -->
                                                                <div th:if="${item.approvalStatus.name() == 'PENDING_APPROVAL'}"
                                                                    class="review-status-indicator mb-2"
                                                                    th:data-knowledge-id="${item.id}">
                                                                    <div class="alert alert-info py-2 mb-2"
                                                                        style="display: none;">
                                                                        <i class="fas fa-user-clock mr-2"></i>
                                                                        <small>Đang được review bởi: <span
                                                                                class="reviewer-name"></span></small>
                                                                    </div>
                                                                </div>

                                                                <div class="mb-2">
                                                                    <div class="d-flex flex-wrap" style="gap: 5px;">
                                                                        <span th:each="kit : ${item.knowledgeItemTags}"
                                                                            class="badge"
                                                                            style="background-color: #dbeafe; color: #1d4ed8; padding: 3px 8px; border-radius: 15px; font-size: 11px;"
                                                                            th:text="${kit.tag.name}">Tag</span>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="card-footer">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between note-text note-text-info">
                                                                    <a href="#" class="knowledge-status">
                                                                        <span
                                                                            th:switch="${#strings.trim(item.approvalStatus).toUpperCase()}">
                                                                            <span th:case="'DRAFT'"
                                                                                class="badge badge-info">Draft
                                                                            </span>
                                                                            <span th:case="'PENDING_APPROVAL'"
                                                                                class="badge badge-warning">Submitted
                                                                                for Review
                                                                            </span>
                                                                            <span th:case="'APPROVED'"
                                                                                class="badge badge-success">Approved
                                                                            </span>
                                                                            <span th:case="'REJECTED'"
                                                                                class="badge badge-danger">Rejected
                                                                            </span>
                                                                            <span th:case="*"
                                                                                class="badge badge-secondary"
                                                                                th:text="${item.approvalStatus}">Unknown
                                                                            </span>
                                                                        </span>
                                                                    </a>
                                                                    <a href="#" class=""><i
                                                                            class="las la-calendar mr-2 font-size-20"></i>
                                                                        <span
                                                                            th:text="${#temporals.format(item.createdAt, 'dd MMM yyyy')}">22
                                                                            Jul 2025</span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="icon active animate__animated animate__fadeIn i-list"
                                                th:if="${!#lists.isEmpty(knowledgeItems)}">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="table-responsive">
                                                            <table class="table  tbl-server-info">
                                                                <thead>
                                                                    <tr class="ligth">
                                                                        <th class="w-50" scope="col">Title</th>
                                                                        <th scope="col">Permission</th>
                                                                        <th scope="col">Created At</th>
                                                                        <th scope="col">Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr th:each="item : ${knowledgeItems}">
                                                                        <td>
                                                                            <h4 class="mb-2" th:text="${item.name}">
                                                                                name</h4>
                                                                            <span
                                                                                th:text="${item.description}">description</span>
                                                                        </td>
                                                                        <td>
                                                                            <i
                                                                                class="las la-user-friends mr-2 font-size-20"></i>
                                                                            03 share
                                                                        </td>
                                                                        <td
                                                                            th:text="${#temporals.format(item.createdAt, 'dd MMM yyyy')}">
                                                                            22 Jul 2025</td>
                                                                        <td>
                                                                            <div>
                                                                                <a href="#"
                                                                                    class="badge badge-success mr-3 edit-knowledge-btn"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                    th:data-folder-id="${item.folder?.id}"><i
                                                                                        class="las la-pen mr-0"></i></a>
                                                                                <a href="#"
                                                                                    class="badge badge-danger delete-knowledge-btn"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-folder-id="${item.folder?.id}"><i
                                                                                        class="las la-trash-alt mr-0"></i></a>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>




                                        <div id="note2" class="tab-pane fade">
                                            <div th:if="${canViewPendingApproval}">
                                                <div class="empty-vault-box"
                                                    th:if="${#lists.isEmpty(pendingKnowledge)}">
                                                    <svg class="ant-empty-img-simple" width="64" height="41"
                                                        viewBox="0 0 64 41" xmlns="http://www.w3.org/2000/svg"
                                                        style="margin-bottom: 16px;">
                                                        <g transform="translate(0 1)" fill="none" fill-rule="evenodd">
                                                            <ellipse class="ant-empty-img-simple-ellipse" cx="32"
                                                                cy="33" rx="32" ry="7" fill="#F5F5F7"></ellipse>
                                                            <g class="ant-empty-img-simple-g" fill-rule="nonzero">
                                                                <path
                                                                    d="M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"
                                                                    fill="#aeb8c2"></path>
                                                                <path
                                                                    d="M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z"
                                                                    class="ant-empty-img-simple-path" fill="#f5f5f7">
                                                                </path>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                    <div class="empty-vault-text">
                                                        <span th:if="${showPrivate}">No knowledge submitted for
                                                            review</span>
                                                        <span th:unless="${showPrivate}">No pending knowledge for
                                                            approval</span>
                                                    </div>
                                                </div>

                                                <!-- Pending Knowledge Grid View -->
                                                <div class="icon active animate__animated animate__fadeIn i-grid"
                                                    th:if="${!#lists.isEmpty(pendingKnowledge)}">
                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-6"
                                                            th:each="item : ${pendingKnowledge}">
                                                            <div class="card card-block card-stretch card-height card-bottom-border-warning note-detail"
                                                                th:data-knowledge-id="${item.id}">
                                                                <div
                                                                    class="card-header d-flex justify-content-between pb-1">
                                                                    <div
                                                                        class="icon iq-icon-box-2 icon-border-warning rounded">
                                                                        <svg width="23" height="23"
                                                                            xmlns="http://www.w3.org/2000/svg"
                                                                            fill="none" viewBox="0 0 24 24"
                                                                            stroke="currentColor">
                                                                            <path stroke-linecap="round"
                                                                                stroke-linejoin="round" stroke-width="2"
                                                                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                                        </svg>
                                                                    </div>
                                                                    <div
                                                                        class="card-header-toolbar d-flex align-items-center">
                                                                        <div class="dropdown">
                                                                            <span class="dropdown-toggle dropdown-bg"
                                                                                data-toggle="dropdown"
                                                                                aria-expanded="false" role="button">
                                                                                <i class="ri-more-fill"></i>
                                                                            </span>
                                                                            <div
                                                                                class="dropdown-menu dropdown-menu-right">
                                                                                <th:block
                                                                                    th:if="${item.approvalStatus.name() == 'PENDING_APPROVAL'}">
                                                                                    <th:block
                                                                                        th:if="${userRole == 'BUILDER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}"><i
                                                                                                class="las la-eye mr-3"></i>View
                                                                                        </a>
                                                                                        <button type="button"
                                                                                            class="dropdown-item withdraw-trigger-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-vault-id="${vault.id}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            th:data-knowledge-title="${item.name}">
                                                                                            <i
                                                                                                class="las la-undo mr-3"></i>Withdraw
                                                                                        </button>
                                                                                    </th:block>
                                                                                    <th:block
                                                                                        th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}">
                                                                                        <a href="#"
                                                                                            class="dropdown-item view-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}">
                                                                                            <i
                                                                                                class="las la-eye mr-3"></i>View
                                                                                        </a>
                                                                                        <a href="#"
                                                                                            class="dropdown-item edit-knowledge-btn"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-knowledge-description="${item.description}"
                                                                                            th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                            th:data-folder-id="${item.folder?.id}">
                                                                                            <i
                                                                                                class="las la-pen mr-3"></i>Edit
                                                                                        </a>

                                                                                        <button
                                                                                            th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}"
                                                                                            class="dropdown-item approve-knowledge-btn"
                                                                                            type="button"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-vault-id="${vault.id}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            style="color: green;"
                                                                                            data-approval-action="approve">
                                                                                            <i
                                                                                                class="las la-check mr-3"></i>
                                                                                            Approve
                                                                                        </button>
                                                                                        <button
                                                                                            th:if="${userRole == 'EXPERT' or userRole == 'VAULT_OWNER'}"
                                                                                            class="dropdown-item reject-knowledge-btn"
                                                                                            type="button"
                                                                                            th:data-knowledge-id="${item.id}"
                                                                                            th:data-knowledge-title="${item.name}"
                                                                                            th:data-folder-id="${item.folder?.id}"
                                                                                            style="color: red;"
                                                                                            data-approval-action="reject">
                                                                                            <i
                                                                                                class="las la-times mr-3"></i>
                                                                                            Reject
                                                                                        </button>
                                                                                    </th:block>
                                                                                </th:block>


                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="card-body rounded">
                                                                    <h4 class="card-title" th:text="${item.name}">name
                                                                    </h4>
                                                                    <p class="mb-3 card-description short"
                                                                        th:text="${item.description}">description</p>
                                                                    <div class="text-muted small">
                                                                        <span>Created by: </span><span
                                                                            th:text="${pendingUserInfo['creator_' + item.createdBy] ?: 'Unknown User'}">creator</span>
                                                                    </div>
                                                                </div>
                                                                <div class="card-footer">
                                                                    <div
                                                                        class="d-flex align-items-center justify-content-between note-text note-text-warning">
                                                                        <span class="badge badge-warning">
                                                                            <span th:if="${showPrivate}">Submitted for
                                                                                Review</span>
                                                                            <span th:unless="${showPrivate}">Pending
                                                                                Approval</span>
                                                                        </span>
                                                                        <a href="#" class="">
                                                                            <i
                                                                                class="las la-calendar mr-2 font-size-20"></i>
                                                                            <span
                                                                                th:text="${#temporals.format(item.createdAt, 'dd/MM/yyyy')}">date</span>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div th:unless="${canViewPendingApproval}">
                                                <div class="empty-vault-box">
                                                    <div class="empty-vault-text">
                                                        <span th:if="${showPrivate}">Access denied. You don't have
                                                            permission to view submitted reviews in this section.</span>
                                                        <span th:unless="${showPrivate}">Access denied. You don't have
                                                            permission to view pending approvals in this section.</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="note3" class="tab-pane fade" th:unless="${hideApprovalTab}">
                                            <div class="empty-vault-box" th:if="${#lists.isEmpty(approvedKnowledge)}">
                                                <svg class="ant-empty-img-simple" width="64" height="41"
                                                    viewBox="0 0 64 41" xmlns="http://www.w3.org/2000/svg"
                                                    style="margin-bottom: 16px;">
                                                    <g transform="translate(0 1)" fill="none" fill-rule="evenodd">
                                                        <ellipse class="ant-empty-img-simple-ellipse" cx="32" cy="33"
                                                            rx="32" ry="7" fill="#F5F5F7"></ellipse>
                                                        <g class="ant-empty-img-simple-g" fill-rule="nonzero">
                                                            <path
                                                                d="M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"
                                                                fill="#aeb8c2"></path>
                                                            <path
                                                                d="M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z"
                                                                class="ant-empty-img-simple-path" fill="#f5f5f7"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                                <div class="empty-vault-text">No approved knowledge</div>
                                            </div>

                                            <!-- Approved Knowledge Grid View -->
                                            <div class="icon active animate__animated animate__fadeIn i-grid"
                                                th:if="${!#lists.isEmpty(approvedKnowledge)}">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-6"
                                                        th:each="item : ${approvedKnowledge}">
                                                        <div class="card card-block card-stretch card-height card-bottom-border-success note-detail"
                                                            th:data-knowledge-id="${item.id}">
                                                            <div
                                                                class="card-header d-flex justify-content-between pb-1">
                                                                <div
                                                                    class="icon iq-icon-box-2 icon-border-success rounded">
                                                                    <svg width="23" height="23"
                                                                        xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                                    </svg>
                                                                </div>
                                                                <div
                                                                    class="card-header-toolbar d-flex align-items-center">
                                                                    <div class="dropdown">
                                                                        <span class="dropdown-toggle dropdown-bg"
                                                                            data-toggle="dropdown" aria-expanded="false"
                                                                            role="button">
                                                                            <i class="ri-more-fill"></i>
                                                                        </span>
                                                                        <div class="dropdown-menu dropdown-menu-right">
                                                                            <a href="#"
                                                                                class="dropdown-item view-knowledge-btn"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                th:data-folder-id="${item.folder?.id}">
                                                                                <i class="las la-eye mr-3"></i>View
                                                                            </a>
                                                                            <a href="#"
                                                                                class="dropdown-item edit-knowledge-btn"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                th:data-folder-id="${item.folder?.id}">
                                                                                <i class="las la-pen mr-3"></i>Edit
                                                                            </a>


                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-body rounded">
                                                                <h4 class="card-title" th:text="${item.name}">name</h4>
                                                                <p class="mb-3 card-description short"
                                                                    th:text="${item.description}">description</p>
                                                                <div class="text-muted small"
                                                                    th:if="${item.approvedBy != null}">
                                                                    <span>Approved by: </span><span
                                                                        th:text="${approvedUserInfo['approver_' + item.approvedBy] ?: 'Unknown User'}">approver</span>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between note-text note-text-success">
                                                                    <span class="badge badge-success">Approved</span>
                                                                    <a href="#" class="">
                                                                        <i
                                                                            class="las la-calendar mr-2 font-size-20"></i>
                                                                        <span
                                                                            th:text="${#temporals.format(item.approvedAt != null ? item.approvedAt : item.createdAt, 'dd/MM/yyyy')}">date</span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Draft Tab Content -->
                                        <div id="note4" class="tab-pane fade" th:if="${showPrivate}">
                                            <div class="empty-vault-box" th:if="${#lists.isEmpty(draftKnowledge)}">
                                                <svg class="ant-empty-img-simple" width="64" height="41"
                                                    viewBox="0 0 64 41" xmlns="http://www.w3.org/2000/svg"
                                                    style="margin-bottom: 16px;">
                                                    <g transform="translate(0 1)" fill="none" fill-rule="evenodd">
                                                        <ellipse class="ant-empty-img-simple-ellipse" cx="32" cy="33"
                                                            rx="32" ry="7" fill="#F5F5F7"></ellipse>
                                                        <g class="ant-empty-img-simple-g" fill-rule="nonzero">
                                                            <path
                                                                d="M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"
                                                                fill="#aeb8c2"></path>
                                                            <path
                                                                d="M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z"
                                                                class="ant-empty-img-simple-path" fill="#f5f5f7"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                                <div class="empty-vault-text">No draft knowledge</div>
                                            </div>

                                            <!-- Draft Knowledge Grid View -->
                                            <div class="icon active animate__animated animate__fadeIn i-grid"
                                                th:if="${!#lists.isEmpty(draftKnowledge)}">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-6" th:each="item : ${draftKnowledge}">
                                                        <div class="card card-block card-stretch card-height card-bottom-border-info note-detail"
                                                            th:data-knowledge-id="${item.id}">
                                                            <div
                                                                class="card-header d-flex justify-content-between pb-1">
                                                                <div
                                                                    class="icon iq-icon-box-2 icon-border-info rounded">
                                                                    <svg width="23" height="23"
                                                                        xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                                                                    </svg>
                                                                </div>
                                                                <div
                                                                    class="card-header-toolbar d-flex align-items-center">
                                                                    <div class="dropdown">
                                                                        <span class="dropdown-toggle dropdown-bg"
                                                                            data-toggle="dropdown" aria-expanded="false"
                                                                            role="button">
                                                                            <i class="ri-more-fill"></i>
                                                                        </span>
                                                                        <div class="dropdown-menu dropdown-menu-right">
                                                                            <a href="#"
                                                                                class="dropdown-item view-knowledge-btn"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                th:data-folder-id="${item.folder?.id}">
                                                                                <i class="las la-eye mr-3"></i>View
                                                                            </a>
                                                                            <a href="#"
                                                                                class="dropdown-item edit-knowledge-btn"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                th:data-folder-id="${item.folder?.id}">
                                                                                <i class="las la-pen mr-3"></i>Edit
                                                                            </a>

                                                                            <a href="#"
                                                                                class="dropdown-item move-knowledge-btn"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                th:data-folder-id="${item.folder?.id}"
                                                                                th:data-approval-status="${item.approvalStatus}">
                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                    width="16" height="16"
                                                                                    fill="currentColor"
                                                                                    class="bi bi-arrows-move"
                                                                                    viewBox="0 0 16 16"
                                                                                    style="margin-right: 3px;">
                                                                                    <path fill-rule="evenodd"
                                                                                        d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10M.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8" />
                                                                                </svg>
                                                                                Move
                                                                            </a>

                                                                            <!-- Submit for Approval button -->
                                                                            <form
                                                                                th:action="@{/vault-detail/submit-for-approval}"
                                                                                method="post" style="display:inline;">
                                                                                <input type="hidden" name="vaultId"
                                                                                    th:value="${vault.id}" />
                                                                                <input type="hidden" name="folderId"
                                                                                    th:value="${item.folder?.id}" />
                                                                                <input type="hidden" name="knowledgeId"
                                                                                    th:value="${item.id}" />
                                                                                <button class="dropdown-item"
                                                                                    type="submit"
                                                                                    style="color: #007bff;">
                                                                                    <i
                                                                                        class="las la-paper-plane mr-3"></i>Submit
                                                                                    for Approval
                                                                                </button>
                                                                            </form>
                                                                            <button
                                                                                class="dropdown-item delete-knowledge-btn"
                                                                                type="button"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-folder-id="${item.folder?.id}">
                                                                                <i class="las la-trash-alt mr-3"></i>
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-body rounded">
                                                                <h4 class="card-title" th:text="${item.name}">name</h4>
                                                                <p class="mb-3 card-description short"
                                                                    th:text="${item.description}">description</p>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between note-text note-text-info">
                                                                    <span class="badge badge-info">Draft</span>
                                                                    <a href="#" class="">
                                                                        <i
                                                                            class="las la-calendar mr-2 font-size-20"></i>
                                                                        <span
                                                                            th:text="${#temporals.format(item.createdAt, 'dd/MM/yyyy')}">date</span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Draft Knowledge List View -->
                                            <div class="icon active animate__animated animate__fadeIn i-list"
                                                th:if="${!#lists.isEmpty(draftKnowledge)}">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="table-responsive">
                                                            <table class="table  tbl-server-info">
                                                                <thead>
                                                                    <tr class="ligth">
                                                                        <th class="w-50" scope="col">Title</th>
                                                                        <th scope="col">Status</th>
                                                                        <th scope="col">Created At</th>
                                                                        <th scope="col">Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr th:each="item : ${draftKnowledge}">
                                                                        <td>
                                                                            <h4 class="mb-2" th:text="${item.name}">
                                                                                name</h4>
                                                                            <span
                                                                                th:text="${item.description}">description</span>
                                                                        </td>
                                                                        <td>
                                                                            <span class="badge badge-info">Draft</span>
                                                                        </td>
                                                                        <td
                                                                            th:text="${#temporals.format(item.createdAt, 'dd MMM yyyy')}">
                                                                            22 Jul 2025</td>
                                                                        <td>
                                                                            <div>
                                                                                <a href="#"
                                                                                    class="badge badge-success mr-3 edit-knowledge-btn"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-knowledge-content="${#strings.escapeXml(item.content)}"
                                                                                    th:data-folder-id="${item.folder?.id}"><i
                                                                                        class="las la-pen mr-0"></i></a>
                                                                                <a href="#"
                                                                                    class="badge badge-danger delete-knowledge-btn"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-folder-id="${item.folder?.id}"><i
                                                                                        class="las la-trash-alt mr-0"></i></a>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tab note5: Rejected Knowledge -->
                                        <div id="note5" class="tab-pane fade"
                                            th:classappend="${showReject} ? 'active show' : ''">
                                            <div class="empty-vault-box" th:if="${#lists.isEmpty(rejectedKnowledge)}">
                                                <svg class="ant-empty-img-simple" width="64" height="41"
                                                    viewBox="0 0 64 41" xmlns="http://www.w3.org/2000/svg"
                                                    style="margin-bottom: 16px;">
                                                    <g transform="translate(0 1)" fill="none" fill-rule="evenodd">
                                                        <ellipse class="ant-empty-img-simple-ellipse" cx="32" cy="33"
                                                            rx="32" ry="7" fill="#F5F5F7"></ellipse>
                                                        <g class="ant-empty-img-simple-g" fill-rule="nonzero">
                                                            <path
                                                                d="M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"
                                                                fill="#aeb8c2"></path>
                                                            <path
                                                                d="M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z"
                                                                class="ant-empty-img-simple-path" fill="#f5f5f7"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                                <div class="empty-vault-text">No rejected knowledge</div>
                                            </div>

                                            <div class="icon active animate__animated animate__fadeIn i-grid"
                                                th:if="${!#lists.isEmpty(rejectedKnowledge)}">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-6 mb-3"
                                                        th:each="item : ${rejectedKnowledge}">
                                                        <div class="card card-block card-stretch card-height card-bottom-border-danger note-detail"
                                                            th:data-knowledge-id="${item.id}">
                                                            <div
                                                                class="card-header d-flex justify-content-between pb-1">
                                                                <div
                                                                    class="icon iq-icon-box-2 icon-border-danger rounded">
                                                                    <svg width="23" height="23"
                                                                        xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                        viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round"
                                                                            stroke-linejoin="round" stroke-width="2"
                                                                            d="M6 18L18 6M6 6l12 12">
                                                                        </path>
                                                                    </svg>
                                                                </div>
                                                                <div
                                                                    class="card-header-toolbar d-flex align-items-center">
                                                                    <div class="dropdown">
                                                                        <span class="dropdown-toggle"
                                                                            id="dropdownMenuButton05"
                                                                            data-toggle="dropdown" aria-expanded="false"
                                                                            role="button">
                                                                            <i class="ri-more-fill"></i>
                                                                        </span>
                                                                        <div class="dropdown-menu dropdown-menu-right"
                                                                            aria-labelledby="dropdownMenuButton05">
                                                                            <a class="dropdown-item view-knowledge-btn"
                                                                                href="#"
                                                                                th:data-knowledge-id="${item.id}">
                                                                                <i class="ri-eye-fill mr-3"></i>View
                                                                            </a>
                                                                            <button
                                                                                class="dropdown-item delete-knowledge-btn"
                                                                                type="button"
                                                                                th:data-knowledge-id="${item.id}"
                                                                                th:data-knowledge-title="${item.name}"
                                                                                th:data-folder-id="${item.folder?.id}">
                                                                                <i class="las la-trash-alt mr-3"></i>
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-body rounded">
                                                                <h4 class="card-title" th:text="${item.name}">name</h4>
                                                                <p class="mb-3 card-description short"
                                                                    th:text="${item.description}">description</p>
                                                                <div th:if="${item.rejectionReason}"
                                                                    style="background: #fef2f2; border: 1px solid #fca5a5; border-radius: 6px; padding: 8px; margin-top: 10px;">
                                                                    <div
                                                                        style="font-size: 12px; color: #dc2626; font-weight: bold; margin-bottom: 4px;">
                                                                        Rejection Reason:
                                                                    </div>
                                                                    <div style="font-size: 13px; color: #991b1b;"
                                                                        th:text="${item.rejectionReason}">
                                                                        Rejection reason text
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer">
                                                                <div
                                                                    class="d-flex align-items-center justify-content-between note-text note-text-info">
                                                                    <span class="badge badge-danger">Rejected</span>
                                                                    <div class="d-flex align-items-center">
                                                                        <a href="#" class="">
                                                                            <i
                                                                                class="las la-user mr-2 font-size-20"></i>
                                                                            <span
                                                                                th:text="${rejectedUserInfo[item.id]}">User</span>
                                                                        </a>
                                                                        <a href="#" class="" style="margin-left: 15px;">
                                                                            <i
                                                                                class="las la-calendar mr-2 font-size-20"></i>
                                                                            <span
                                                                                th:text="${#temporals.format(item.rejectedAt, 'dd MMM yyyy')}">Date</span>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="icon active animate__animated animate__fadeIn i-list"
                                                th:if="${!#lists.isEmpty(rejectedKnowledge)}">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="table-responsive">
                                                            <table class="table  tbl-server-info">
                                                                <thead>
                                                                    <tr class="ligth">
                                                                        <th scope="col">Knowledge</th>
                                                                        <th scope="col">Rejection Reason</th>
                                                                        <th scope="col">Author</th>
                                                                        <th scope="col">Rejected Date</th>
                                                                        <th scope="col">Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody th:each="item : ${rejectedKnowledge}">
                                                                    <tr>
                                                                        <td>
                                                                            <div class="d-flex align-items-center">
                                                                                <div class="icon icon-border rounded-pill"
                                                                                    style="background: #dc2626; color: white;">
                                                                                    <svg width="23" height="23"
                                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                                        fill="none" viewBox="0 0 24 24"
                                                                                        stroke="currentColor">
                                                                                        <path stroke-linecap="round"
                                                                                            stroke-linejoin="round"
                                                                                            stroke-width="2"
                                                                                            d="M6 18L18 6M6 6l12 12">
                                                                                        </path>
                                                                                    </svg>
                                                                                </div>
                                                                                <div class="ms-3">
                                                                                    <h6 class="mb-0 text-capitalize font-weight-bold"
                                                                                        th:text="${item.name}">Knowledge
                                                                                        Title</h6>
                                                                                    <p class="mb-0"
                                                                                        th:text="${item.description}">
                                                                                        Description</p>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <span
                                                                                th:text="${item.rejectionReason ?: 'No reason provided'}">Rejection
                                                                                reason</span>
                                                                        </td>
                                                                        <td>
                                                                            <span
                                                                                th:text="${rejectedUserInfo[item.id]}">Author</span>
                                                                        </td>
                                                                        <td>
                                                                            <span
                                                                                th:text="${#temporals.format(item.rejectedAt, 'dd MMM yyyy')}">Date</span>
                                                                        </td>
                                                                        <td>
                                                                            <div
                                                                                class="d-flex align-items-center list-action">
                                                                                <a class="badge badge-info mr-2 view-knowledge-btn"
                                                                                    data-toggle="tooltip"
                                                                                    data-placement="top" title="View"
                                                                                    href="#"
                                                                                    th:data-knowledge-id="${item.id}"><i
                                                                                        class="ri-eye-line mr-0"></i></a>
                                                                                <a class="badge bg-warning mr-2 delete-knowledge-btn"
                                                                                    data-toggle="tooltip"
                                                                                    data-placement="top" title="Delete"
                                                                                    href="#"
                                                                                    th:data-knowledge-id="${item.id}"
                                                                                    th:data-knowledge-title="${item.name}"
                                                                                    th:data-folder-id="${item.folder?.id}"><i
                                                                                        class="las la-trash-alt mr-0"></i></a>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Page end  -->
            </div>

            <!-- Knowledge Assistant View -->
            <div id="assistantView" class="container-fluid note-details" style="position: relative;">
                <div class="row" style="position: relative;">

                    <div class="col-md-12">
                        <div class="card-body custom-notes-space" style="background: #ffffff; 
                            width: 100%; height: 93.5vh; border-radius: 15px; display: flex; flex-direction: column; 
                            position: relative; overflow: hidden; padding-right: 0px !important;">

                            <!-- Sidebar History Chat -->
                            <div id="assistantHistorySidebar"
                                style="position: absolute; left: 0; top: 0; bottom: 0; width: 0; max-width: 320px; background: #ffffff; border-right: 1px solid #e5e7eb; z-index: 20; overflow-x: hidden; transition: width 0.3s cubic-bezier(0.4,0,0.2,1); box-shadow: 2px 0 8px rgba(0,0,0,0.04);">
                                <div style="height: 100%; display: flex; flex-direction: column;">
                                    <div
                                        style="padding: 18px 18px 10px 18px; border-bottom: 1px solid #d1d5db; display: flex; align-items: center; justify-content: space-between; flex-direction: row;">
                                        <span style="font-weight: 600; font-size: 1.1rem; color: #374151;">Chat
                                            History</span>
                                        <!-- Nút tạo chat mới -->
                                        <button id="newChatBtn" title="New chat"
                                            style="background: none; border: none; font-size: 22px; color: #374151; cursor: pointer; padding: 0 2px;">
                                            <svg width="22" height="22" fill="none" viewBox="0 0 24 24"
                                                stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M12 4v16m8-8H4" />
                                            </svg>
                                        </button>
                                    </div>
                                    <div style="padding: 10px 18px 0 18px; background: #ffffff; ">
                                        <input id="searchChatInput" type="text" placeholder="Search chat..."
                                            style="width: 100%; padding: 7px 12px; border-radius: 8px; border: 1px solid #e5e7eb; font-size: 14px; background: #fff; color: #374151; outline: none;" />
                                    </div>
                                    <div id="chatSessionListWrapper"
                                        style="flex: 1; overflow-y: auto; padding: 10px 0;">
                                        <ul id="chatSessionList" style="list-style: none; padding: 0 0 0 0; margin: 0;">
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!-- Icon to open sidebar -->
                            <button id="openHistorySidebarBtn"
                                style="position: absolute; right: 18px; top: 24px; z-index: 30; background: #fff; border: 1px solid #e5e7eb; border-radius: 50%; width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.04); cursor: pointer; transition: background 0.2s;">
                                <svg width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                    style="color: #374151;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </button>
                            <!-- End Sidebar History Chat -->

                            <!-- Background Pattern -->
                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; 
                                background-image: radial-gradient(circle at 30% 20%, rgba(0,0,0,0.02) 0%, transparent 50%), 
                                radial-gradient(circle at 70% 80%, rgba(0,0,0,0.03) 0%, transparent 50%);
                                pointer-events: none;"></div>

                            <!-- Direct Content Container -->
                            <div
                                style="display: flex; flex-direction: column; height: 100%; position: relative; z-index: 1;">

                                <!-- Assistant Header with Navigation -->
                                <div
                                    style="flex-shrink: 0; padding: 15px 20px; border-bottom: 1px solid #d1d5db; background: #ffffff;">
                                    <div style="display: flex; align-items: center; justify-content: space-between;">
                                        <h3 style="margin: 0; color: #374151; font-weight: 600; font-size: 1.4rem;">
                                            HiveWise Assistant
                                        </h3>
                                    </div>
                                </div>

                                <!-- Welcome Section (Centered) -->
                                <div id="welcomeSection" style="flex-shrink: 0; text-align: center; margin-top: 120px;">
                                    <!-- Logo -->
                                    <div style="margin-bottom: 20px;">
                                        <img src="/images/logo/logo_100x100_dark.png" width="80px" alt="logo-assistant"
                                            style="border-radius: 12px; transition: all 0.3s ease;"
                                            onmouseover="this.style.transform='scale(1.05)'"
                                            onmouseout="this.style.transform='scale(1)'">
                                    </div>

                                    <!-- Title -->
                                    <h2
                                        style="color: #374151; font-weight: 600; margin-bottom: 10px; font-size: 1.8rem;">
                                        Welcome to HiveWise Assistant
                                    </h2>

                                    <!-- Description -->
                                    <p style="color: #6b7280; font-size: 15px; margin-bottom: 30px; line-height: 1.5;">
                                        Ask questions about your workspace knowledge or get AI assistance with your
                                        content.
                                    </p>
                                </div>

                                <div id="chatHistorySection"
                                    style="display: none; flex: 1; min-height: 0; margin-bottom: 20px; overflow-y: auto; padding: 10 20px;">
                                    <div id="chatHistory" style="max-width: 800px; margin: 0 auto;">
                                        <div id="emptyChatState" style="text-align: center; padding: 20px;">
                                            <p style="color: #9ca3af; font-size: 14px; margin: 0;">
                                                No conversations yet. Start by asking a question below!
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div id="inputSection"
                                    style="flex-shrink: 0; max-width: 800px; width: 95%; margin: 0 auto; padding: 0 20px;">
                                    <div style="background: #f9fafb; border: solid 1px #e5e7eb; border-radius: 15px; 
                        padding: 10px; transition: all 0.3s ease; width: 100%; margin-bottom: 0px;">

                                        <textarea id="chatInput" placeholder="What would you like to know?" style="width: 100%; border: none; outline: none; resize: none; font-size: 14px; 
                            color: #374151; line-height: 1.5; min-height: 60px; background: transparent; 
                            padding: 10px;" rows="2"></textarea>

                                        <div style="display: flex; align-items: center; justify-content: flex-end; 
                            padding-top: 15px; border-top: 1px solid #e5e7eb;">

                                            <button id="sendButton" onclick="sendMessage()" style="width: 40px; height: 40px; border-radius: 50%; 
                                                background: #000000; color: #ffffff; border: none; display: flex; align-items: center; 
                                                justify-content: center; cursor: pointer; transition: all 0.3s ease;"
                                                onmouseover="this.style.background='#374151'; this.style.transform='scale(1.05)'"
                                                onmouseout="this.style.background='#000000'; this.style.transform='scale(1)'">
                                                <svg width="18" height="18" fill="none" viewBox="0 0 24 24"
                                                    stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>

                                    <div id="quickActionsSection" style=" margin-top: 12px;">
                                        <p
                                            style="color: #6b7280; font-size: 13px; margin-bottom: 12px; font-weight: 500; text-align: center;">
                                            Quick Actions:
                                        </p>
                                        <div
                                            style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                            <button style="background: #ffffff; border: 1px solid #e5e7eb; 
                                                border-radius: 12px; padding: 8px 16px; color: #374151; font-size: 12px; cursor: pointer; 
                                                transition: all 0.3s ease; font-weight: 500;"
                                                onmouseover="this.style.background='#f3f4f6'; this.style.borderColor='#d1d5db'"
                                                onmouseout="this.style.background='#ffffff'; this.style.borderColor='#e5e7eb'">
                                                📚 Summarize
                                            </button>
                                            <button style="background: #ffffff; border: 1px solid #e5e7eb; 
                                                border-radius: 12px; padding: 8px 16px; color: #374151; font-size: 12px; cursor: pointer; 
                                                transition: all 0.3s ease; font-weight: 500;"
                                                onmouseover="this.style.background='#f3f4f6'; this.style.borderColor='#d1d5db'"
                                                onmouseout="this.style.background='#ffffff'; this.style.borderColor='#e5e7eb'">
                                                🔍 Research
                                            </button>
                                            <button style="background: #ffffff; border: 1px solid #e5e7eb; 
                                                border-radius: 12px; padding: 8px 16px; color: #374151; font-size: 12px; cursor: pointer; 
                                                transition: all 0.3s ease; font-weight: 500;"
                                                onmouseover="this.style.background='#f3f4f6'; this.style.borderColor='#d1d5db'"
                                                onmouseout="this.style.background='#ffffff'; this.style.borderColor='#e5e7eb'">
                                                ✨ Generate
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Knowledge Assistant View -->
            <!-- Share Modal -->
            <div class="modal fade" id="share-note" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="popup text-left">
                                <h4 class="mb-3">Share</h4>
                                <div class="content create-workform bg-body">
                                    <div class="mb-3">
                                        <h5 class="mb-2">Shareable Link</h5>
                                        <input type="text" class="form-control" placeholder=""
                                            value="Https://HiseWise.com/Shots/6387620">
                                    </div>
                                    <div class="pb-3">
                                        <h5 class="mb-2">Invite Someone</h5>
                                        <input type="text" class="form-control" placeholder="Enter Name or Email">
                                    </div>
                                    <div class="col-lg-12 mt-4">
                                        <div class="d-flex flex-wrap align-items-ceter justify-content-center">
                                            <div class="btn btn-primary mr-4" data-dismiss="modal">Cancel</div>
                                            <div class="btn btn-outline-primary" data-dismiss="modal">Create</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Toast Notification -->
    <div id="toast-notification" class="toast-notification">
        <svg id="toast-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span id="toast-message"></span>
    </div>

    <!-- Global Delete Folder Popup -->
    <div id="deleteFolderPopup" class="delete-folder-popup" style="display: none;">
        <div class="delete-folder-popup-content">
            <div class="delete-folder-popup-header">
                <h4>Delete Folder</h4>
                <button type="button" class="close-popup" onclick="hideDeleteModal()">
                    <i class="las la-times"></i>
                </button>
            </div>
            <div class="delete-folder-popup-body">
                <p>Are you sure you want to delete "<span id="folderNameToDelete">Folder</span>"?</p>
                <p class="text-muted">This action cannot be undone.</p>
            </div>
            <div class="delete-folder-popup-footer">
                <button type="button" class="btn btn-secondary" onclick="hideDeleteModal()">Cancel</button>
                <button type="button" class="btn btn-danger" onclick="confirmDeleteFolder()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Global Delete Knowledge Popup -->
    <div id="deleteKnowledgePopup" class="delete-folder-popup" style="display: none;">
        <div class="delete-folder-popup-content">
            <div class="delete-folder-popup-header">
                <h4>Delete Knowledge</h4>
                <button type="button" class="close-popup" onclick="hideDeleteKnowledgeModal()">
                    <i class="las la-times"></i>
                </button>
            </div>
            <div class="delete-folder-popup-body">
                <p>Are you sure you want to delete "<span id="knowledgeNameToDelete">Knowledge</span>"?</p>
                <p class="text-muted">This action cannot be undone.</p>
            </div>
            <div class="delete-folder-popup-footer">
                <button type="button" class="btn btn-secondary" onclick="hideDeleteKnowledgeModal()">Cancel</button>
                <button type="button" class="btn btn-danger" onclick="confirmDeleteKnowledge()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Withdraw Knowledge Confirmation Modal -->
    <div id="withdrawKnowledgePopup" class="delete-folder-popup" style="display: none;">
        <div class="delete-folder-popup-content">
            <div class="delete-folder-popup-header">
                <h4>Withdraw Knowledge</h4>
                <button type="button" class="close-popup" onclick="hideWithdrawModal()">&times;</button>
            </div>
            <div class="delete-folder-popup-body">
                <p>Are you sure you want to withdraw "<span id="knowledgeNameToWithdraw">Knowledge</span>"?</p>
                <div id="withdrawReviewWarning" style="display: none; margin-top: 10px;">
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="withdrawReviewMessage">This knowledge is currently being reviewed.</span>
                    </div>
                </div>
            </div>
            <div class="delete-folder-popup-footer">
                <button type="button" class="btn btn-secondary" onclick="hideWithdrawModal()">Cancel</button>
                <button type="button" class="btn btn-warning" onclick="confirmWithdrawKnowledge()">
                    <i class="las la-undo mr-2"></i>Withdraw
                </button>
            </div>
        </div>
    </div>

    <!-- Hidden form for withdraw submission -->
    <form id="withdrawKnowledgeForm" method="POST" action="/vault-detail/withdraw-knowledge" style="display: none;">
        <input type="hidden" id="withdrawKnowledgeId" name="knowledgeId">
        <input type="hidden" id="withdrawVaultId" name="vaultId">
        <input type="hidden" id="withdrawFolderId" name="folderId">
        <input type="hidden" id="withdrawPrivate" name="private">
    </form>

    <!-- Global Reject Knowledge Modal -->
    <div class="modal fade" id="rejectKnowledgeModal" tabindex="-1" role="dialog"
        aria-labelledby="rejectKnowledgeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="rejectKnowledgeModalLabel">Reject Knowledge</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to reject "<span id="knowledgeNameToReject">Knowledge</span>"?</p>
                    <div class="form-group" style="margin-top: 15px;">
                        <label for="rejectionReason">Reason for rejection (optional):</label>
                        <textarea id="rejectionReason" class="form-control" rows="3"
                            placeholder="Enter reason for rejection..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="confirmRejectKnowledge()">Reject</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Delete Permanent Knowledge Popup -->
    <div id="deletePermanentKnowledgePopup" class="delete-folder-popup" style="display: none;">
        <div class="delete-folder-popup-content">
            <div class="delete-folder-popup-header">
                <h4>Delete Permanently</h4>
                <button type="button" class="close-popup" onclick="hideDeletePermanentModal()">
                    <i class="las la-times"></i>
                </button>
            </div>
            <div class="delete-folder-popup-body">
                <p>Are you sure you want to permanently delete "<span
                        id="knowledgeNameToDeletePermanent">Knowledge</span>"?</p>
                <p class="text-muted"><strong>Warning:</strong> This action cannot be undone and the knowledge will be
                    lost forever.</p>
            </div>
            <div class="delete-folder-popup-footer">
                <button type="button" class="btn btn-secondary" onclick="hideDeletePermanentModal()">Cancel</button>
                <button type="button" class="btn btn-danger" onclick="confirmDeletePermanentKnowledge()">Delete
                    Permanently</button>
            </div>
        </div>
    </div>



    <!-- Folder Selection Modal for Approval -->
    <div class="modal fade" id="folderSelectionModal" tabindex="-1" role="dialog"
        aria-labelledby="folderSelectionModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="folderSelectionModalLabel">Select Official Folder</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Please select a folder in Official Knowledge to move this approved knowledge:</p>
                    <form id="approveKnowledgeForm" method="post"
                        th:action="@{/vault-detail/approve-knowledge-with-folder}">
                        <input type="hidden" id="approveKnowledgeId" name="knowledgeId" value="">
                        <input type="hidden" id="approveVaultId" name="vaultId" th:value="${vault.id}">
                        <input type="hidden" id="approveFolderId" name="folderId" value="">
                        <div class="form-group">
                            <label for="targetFolderId">Official Folders:</label>
                            <select class="form-control" id="targetFolderId" name="targetFolderId" required>
                                <option value="">-- Select a folder --</option>
                                <option th:each="folder : ${publicFolders}" th:value="${folder.id}"
                                    th:text="${folder.name}">
                                    Folder Name
                                </option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="confirmApproveBtn">Approve & Move</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Move Knowledge Modal -->
    <div class="modal fade" id="moveKnowledgeModal" tabindex="-1" role="dialog"
        aria-labelledby="moveKnowledgeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content" style="margin-top: 200px !important;">
                <div class="modal-header">
                    <h5 class="modal-title" id="moveKnowledgeModalLabel">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                            class="bi bi-arrows-move" viewBox="0 0 16 16" style="margin-right: 8px;">
                            <path fill-rule="evenodd"
                                d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10M.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8" />
                        </svg>
                        Move Knowledge
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="knowledge-info mb-3">
                        <h6 id="moveKnowledgeTitle" class="text-primary">Knowledge Title</h6>
                        <small id="moveKnowledgeStatus" class="text-muted">Status: Draft</small>
                        <div id="moveRestrictions" class="move-restrictions mt-2">
                        </div>
                    </div>

                    <form id="moveKnowledgeForm" method="post" th:action="@{/vault-detail/move-knowledge}">
                        <input type="hidden" id="moveKnowledgeId" name="knowledgeId" value="">
                        <input type="hidden" id="moveVaultId" name="vaultId" th:value="${vault.id}">
                        <input type="hidden" id="moveCurrentFolderId" name="currentFolderId" value="">
                        <input type="hidden" id="moveTargetFolderId" name="targetFolderId" value="">

                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="mb-3">
                                    <svg class="personal-icon" id="iq-main-3" aria-hidden="true"
                                        style=" width: 22px; height: 22px; transition: opacity 0.2s; opacity: 1; visibility: visible;"
                                        xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                                        viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z">
                                        </path>
                                    </svg>
                                    Private Folders
                                </h6>
                                <div id="privateFolderTree" class="folder-tree">
                                    <div class="text-center text-muted">Loading...</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="mb-3">
                                    <svg class="public-icon" id="iq-main-4" aria-hidden="true"
                                        style="margin-top: -2px; opacity: 1; visibility: visible;"
                                        xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                                        viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="2"
                                            d="m8.032 12 1.984 1.984 4.96-4.96m4.55 5.272.893-.893a1.984 1.984 0 0 0 0-2.806l-.893-.893a1.984 1.984 0 0 1-.581-1.403V7.04a1.984 1.984 0 0 0-1.984-1.984h-1.262a1.983 1.983 0 0 1-1.403-.581l-.893-.893a1.984 1.984 0 0 0-2.806 0l-.893.893a1.984 1.984 0 0 1-1.403.581H7.04A1.984 1.984 0 0 0 5.055 7.04v1.262c0 .527-.209 1.031-.581 1.403l-.893.893a1.984 1.984 0 0 0 0 2.806l.893.893c.372.372.581.876.581 1.403v1.262a1.984 1.984 0 0 0 1.984 1.984h1.262c.527 0 1.031.209 1.403.581l.893.893a1.984 1.984 0 0 0 2.806 0l.893-.893a1.985 1.985 0 0 1 1.403-.581h1.262a1.984 1.984 0 0 0 1.984-1.984V15.7c0-.527.209-1.031.581-1.403Z">
                                        </path>
                                    </svg>
                                    Official Folders
                                </h6>
                                <div id="officialFolderTree" class="folder-tree">
                                    <div class="text-center text-muted">Loading...</div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3">
                            <div id="selectedFolderInfo" class="alert alert-info d-none">
                                <strong>Selected folder:</strong> <span id="selectedFolderName"></span>
                                <span id="selectedFolderType" class="badge badge-primary ml-2"></span>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmMoveBtn" disabled>
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                            <path fill-rule="evenodd"
                                d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10M.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8" />
                        </svg>
                        Move Knowledge
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        window.userAvatarUrl = null;
    </script>

    <!-- Create Session Modal -->
    <div class="modal fade" id="createSessionModal" tabindex="-1" role="dialog"
        aria-labelledby="createSessionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document"
            style="margin: 0 auto; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 800px;">
            <div class="modal-content"
                style="border-radius: 12px; border: none; box-shadow: 0 20px 40px rgba(0,0,0,0.15); max-height: 90vh; overflow-y: auto;">
                <div class="modal-header" style="border-bottom: 1px solid #d1d5db; padding: 20px 24px 10px 24px;">
                    <h5 class="modal-title" id="createSessionModalLabel"
                        style="color: #1f2937; font-weight: 600; font-size: 18px;">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"
                            style="margin-right: 8px; color: #3b82f6;">
                            <path
                                d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                        </svg>
                        Create New Meeting
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        style="padding: 0; margin: 0; border: none; background: none; font-size: 24px; color: #6b7280;">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="padding: 20px; padding-bottom: 0;">
                    <form id="createSessionForm">
                        <div class="form-group mb-4">
                            <label for="sessionTitle"
                                style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px;">Session
                                Title</label>
                            <input type="text" class="form-control" id="sessionTitle" placeholder="Add title" required
                                style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px;">
                        </div>

                        <div class="form-group mb-4">
                            <label for="sessionDescription"
                                style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px;">Description</label>
                            <textarea class="form-control" id="sessionDescription" rows="3"
                                placeholder="Enter session description"
                                style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px; resize: vertical;"></textarea>
                        </div>

                        <div class="mb-4">
                            <div style="display: flex; gap: 15px; align-items: flex-start; flex-wrap: wrap;">
                                <div style="flex: 1; min-width: 140px;">
                                    <label for="sessionDate"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px; display: block;">Start
                                        Date</label>
                                    <input type="date" class="form-control" id="sessionDate" required
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px; width: 100%;">
                                </div>
                                <div style="flex: 1; min-width: 140px;">
                                    <label for="sessionTime"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px; display: block;">Start
                                        Time</label>
                                    <select class="form-control" id="sessionTime" required
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px; width: 100%;"
                                        onchange="updateEndTimeOptions()">
                                        <option value="">Select start time</option>
                                        <option value="00:00">12:00 AM</option>
                                        <option value="00:30">12:30 AM</option>
                                        <option value="01:00">1:00 AM</option>
                                        <option value="01:30">1:30 AM</option>
                                        <option value="02:00">2:00 AM</option>
                                        <option value="02:30">2:30 AM</option>
                                        <option value="03:00">3:00 AM</option>
                                        <option value="03:30">3:30 AM</option>
                                        <option value="04:00">4:00 AM</option>
                                        <option value="04:30">4:30 AM</option>
                                        <option value="05:00">5:00 AM</option>
                                        <option value="05:30">5:30 AM</option>
                                        <option value="06:00">6:00 AM</option>
                                        <option value="06:30">6:30 AM</option>
                                        <option value="07:00">7:00 AM</option>
                                        <option value="07:30">7:30 AM</option>
                                        <option value="08:00">8:00 AM</option>
                                        <option value="08:30">8:30 AM</option>
                                        <option value="09:00">9:00 AM</option>
                                        <option value="09:30">9:30 AM</option>
                                        <option value="10:00">10:00 AM</option>
                                        <option value="10:30">10:30 AM</option>
                                        <option value="11:00">11:00 AM</option>
                                        <option value="11:30">11:30 AM</option>
                                        <option value="12:00">12:00 PM</option>
                                        <option value="12:30">12:30 PM</option>
                                        <option value="13:00">1:00 PM</option>
                                        <option value="13:30">1:30 PM</option>
                                        <option value="14:00">2:00 PM</option>
                                        <option value="14:30">2:30 PM</option>
                                        <option value="15:00">3:00 PM</option>
                                        <option value="15:30">3:30 PM</option>
                                        <option value="16:00">4:00 PM</option>
                                        <option value="16:30">4:30 PM</option>
                                        <option value="17:00">5:00 PM</option>
                                        <option value="17:30">5:30 PM</option>
                                        <option value="18:00">6:00 PM</option>
                                        <option value="18:30">6:30 PM</option>
                                        <option value="19:00">7:00 PM</option>
                                        <option value="19:30">7:30 PM</option>
                                        <option value="20:00">8:00 PM</option>
                                        <option value="20:30">8:30 PM</option>
                                        <option value="21:00">9:00 PM</option>
                                        <option value="21:30">9:30 PM</option>
                                        <option value="22:00">10:00 PM</option>
                                        <option value="22:30">10:30 PM</option>
                                        <option value="23:00">11:00 PM</option>
                                        <option value="23:30">11:30 PM</option>
                                    </select>
                                </div>
                                <div style="flex: 1; min-width: 140px;">
                                    <label for="sessionEndDate"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px; display: block;">End
                                        Date</label>
                                    <input type="date" class="form-control" id="sessionEndDate" readonly
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px; background: #f9fafb; width: 100%;">
                                </div>
                                <div style="flex: 1; min-width: 140px;">
                                    <label for="sessionEndTime"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px; display: block;">End
                                        Time</label>
                                    <select class="form-control" id="sessionEndTime" required
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px; width: 100%;"
                                        onchange="calculateDuration()">
                                        <option value="">Select end time</option>
                                    </select>
                                </div>
                                <div style="flex: 1; min-width: 140px;">
                                    <label for="sessionDuration"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px; display: block;">Duration</label>
                                    <input type="text" class="form-control" id="sessionDuration" readonly
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px; background: #f3f4f6; width: 100%;">
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <div
                                style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: start;">
                                <div class="form-group mb-0">
                                    <label for="sessionInstructor"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px;">Instructor</label>
                                    <input type="text" class="form-control" id="sessionInstructor"
                                        placeholder="Enter instructor name" required
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px;">
                                </div>
                                <div class="form-group mb-0">
                                    <label for="sessionLocation"
                                        style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px;">Location</label>
                                    <input type="text" class="form-control" id="sessionLocation"
                                        placeholder="Add location (e.g. Room 101, Online...)"
                                        style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px;">
                                </div>
                            </div>
                        </div>

                        <div class="form-group mb-4">
                            <label for="meetingLink"
                                style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px;">Meeting
                                Link (Optional)</label>
                            <input type="url" class="form-control" id="meetingLink"
                                placeholder="https://meet.google.com/xxx-xxx-xxx"
                                style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px;">
                        </div>

                        <div class="form-group mb-4">
                            <label for="sessionTags"
                                style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 8px;">Tags</label>
                            <div class="tag-input-container">
                                <input type="text" class="form-control" id="sessionTags"
                                    placeholder="Type to search or add tags..." autocomplete="off"
                                    style="border-radius: 8px; border: 1px solid #d1d5db; padding: 12px 16px; font-size: 14px;">
                                <div id="session-tag-suggestions" class="tag-suggestions-dropdown"
                                    style="display: none;"></div>
                            </div>
                            <div id="session-selected-tags" class="selected-tags" style="margin-top: 8px;"></div>
                            <small class="form-text text-muted"
                                style="font-size: 12px; color: #6b7280; margin-top: 4px;">Press Enter or comma to add
                                tags</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer" style="border-top: 1px solid #e5e7eb; padding: 16px 24px 24px 24px;">
                    <button type="button" class="btn btn-outline-primary btn-sm" data-dismiss="modal"
                        style="border-radius: 15px; padding: 5px 20px; font-size: 14px; font-weight: 500;">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary" id="createSessionBtn"
                        style="border-radius: 15px; padding: 5px 20px; font-size: 14px; font-weight: 500; background-color: #1f2937; border-color: #1f2937;">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 6px;">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                        </svg>
                        Create Meeting
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="sessionDetailModal" class="modal fade session-detail-modal" tabindex="-1" role="dialog"
        aria-labelledby="sessionDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content"
                style="border-radius: 12px; border: none; box-shadow: 0 20px 40px rgba(0,0,0,0.15);">
                <div class="modal-header"
                    style="border-bottom: 1px solid #e5e7eb; padding: 20px 24px; background: linear-gradient(135deg, #eae866 0%, #e4b840 100%); border-radius: 12px 12px 0 0;">
                    <h4 class="modal-title" id="sessionDetailModalLabel"
                        style="font-weight: 600; color: white; font-size: 18px;">
                        <i class="las la-video" style="margin-right: 8px;"></i>Meeting Details
                    </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        style="opacity: 0.8; color: white;">
                        <span aria-hidden="true" style="font-size: 24px;">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="padding: 24px; flex-direction: column;">
                    <!-- Session Title -->
                    <div class="mb-3">
                        <h5 style="color: #1f2937; margin-bottom: 8px; font-weight: 600;">
                            <i class="las la-bookmark" style="margin-right: 8px; color: #ffbf00;"></i>Title
                        </h5>
                        <p id="sessionDetailTitle"
                            style="color: #374151; margin: 0; font-size: 16px; padding-left: 24px;"></p>
                    </div>

                    <div class="mb-3">
                        <h5 style="color: #1f2937; margin-bottom: 8px; font-weight: 600;">
                            <i class="las la-align-left" style="margin-right: 8px; color: #ffbf00;"></i>Description
                        </h5>
                        <p id="sessionDetailDescription"
                            style="color: #6b7280; margin: 0; line-height: 1.5; padding-left: 24px;"></p>
                    </div>

                    <!-- Time Information -->
                    <div class="mb-3">
                        <h5 style="color: #1f2937; margin-bottom: 12px; font-weight: 600;">
                            <i class="las la-calendar-alt" style="margin-right: 8px; color: #ffbf00;"></i>Schedule
                        </h5>
                        <div
                            style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin-left: 24px;">
                            <div class="time-information-section">
                                <div>
                                    <small>Start Time</small>
                                    <p id="sessionDetailStartTime"></p>
                                </div>
                                <div>
                                    <small>End Time</small>
                                    <p id="sessionDetailEndTime"></p>
                                </div>
                                <div>
                                    <small>Duration</small>
                                    <p id="sessionDetailDuration"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Instructor -->
                    <div class="mb-3">
                        <h5 style="color: #1f2937; margin-bottom: 8px; font-weight: 600;">
                            <i class="las la-user-tie" style="margin-right: 8px; color: #ffbf00;"></i>Instructor
                        </h5>
                        <p id="sessionDetailInstructor"
                            style="color: #374151; margin: 0; font-size: 14px; padding-left: 24px;"></p>
                    </div>

                    <!-- Tags -->
                    <div class="mb-3" id="sessionDetailTagsContainer">
                        <h5 style="color: #1f2937; margin-bottom: 8px; font-weight: 600;">
                            <i class="las la-tags" style="margin-right: 8px; color: #ffbf00;"></i>Tags
                        </h5>
                        <div id="sessionDetailTags" class="session-tags"
                            style="display: flex; flex-wrap: wrap; gap: 6px; margin-left: 24px;"></div>
                    </div>

                    <!-- Meeting Link -->
                    <div class="mb-3" id="sessionDetailMeetingLinkContainer">
                        <h5 style="color: #1f2937; margin-bottom: 8px; font-weight: 600;">
                            <i class="las la-link" style="margin-right: 8px; color: #ffbf00;"></i>Meeting Link
                        </h5>
                        <div
                            style="background: #fffdf0; border: 1px solid #e9b60e; border-radius: 8px; padding: 12px; margin-left: 24px;">
                            <p id="sessionDetailMeetingLink"
                                style="color: #ffbb00; margin: 0; word-break: break-all; font-size: 13px;"></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer"
                    style="border-top: 1px solid #e5e7eb; padding: 16px 24px; background: #f9fafb; border-radius: 0 0 12px 12px;">
                    <a id="sessionDetailJoinBtn" href="#" target="_blank" class="btn btn-primary"
                        style="border-radius: 15px;  ">
                        <i class="las la-video mr-2"></i>Join Meeting
                    </a>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" style="border-radius: 15px;">
                        <i class="las la-times mr-2"></i>Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Session Popup -->
    <div id="deleteSessionPopup" class="delete-folder-popup" style="display: none;">
        <div class="delete-folder-popup-content">
            <div class="delete-folder-popup-header">
                <h4>Delete Session</h4>
                <button type="button" class="close-popup" onclick="hideDeleteSessionModal()">
                    <i class="las la-times"></i>
                </button>
            </div>
            <div class="delete-folder-popup-body">
                <p>Are you sure you want to delete "<span id="sessionNameToDelete">Session</span>"?</p>
                <p class="text-muted">This action cannot be undone.</p>
            </div>
            <div class="delete-folder-popup-footer">
                <button type="button" class="btn btn-secondary" onclick="hideDeleteSessionModal()">Cancel</button>
                <button type="button" id="confirmDeleteSessionBtn" class="btn btn-danger"
                    onclick="confirmDeleteSession()">Delete</button>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="/js/backend-bundle.min.js"></script>
    <script src="/js/flex-tree.min.js"></script>
    <script src="/js/tree.js"></script>
    <script src="/js/loader.js"></script>
    <script src="/js/table-treeview.js"></script>
    <script src="/js/chart-custom.js"></script>
    <script src="/js/slider.js"></script>
    <script src="/js/app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>
    <script src="/js/knowledge-interaction.js"></script>
    <script src="/js/text-editor.js"></script>
    <script src="/js/knowledge-assistant.js"></script>

    <!-- Calendar Sessions Data -->
    <script id="calendarSessionsJson" type="application/json" th:utext="${calendarSessionsJson}">[]</script>

    <script src="/js/vault-detail.js"></script>

    <!-- Delete Comment Confirmation Modal -->
    <div class="modal fade" id="deleteCommentModal" tabindex="-1" role="dialog"
        aria-labelledby="deleteCommentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteCommentModalLabel">Xác nhận xóa bình luận</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Bạn có chắc chắn muốn xóa bình luận này không? Hành động này không thể hoàn tác.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteComment">Xóa bình luận</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Vault Search Modal -->
    <div class="modal" id="vaultSearchModal" tabindex="-1" role="dialog" aria-labelledby="vaultSearchModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content"
                style="margin-top: 200px !important; border-radius: 12px; border: none; box-shadow: 0 20px 40px rgba(0,0,0,0.15);">
                <div class="modal-body" style="padding: 24px;">
                    <!-- Search Input -->
                    <div class="search-input-container">
                        <div class="position-relative">
                            <input type="text" id="vaultSearchInput" class="form-control form-control-lg"
                                placeholder="Search or ask a question in huydang139203@gmail.com's Workspace..."
                                style="border-radius: 40px; border: none; padding: 12px 16px 12px 48px; font-size: 16px; background: #f9fafb;">
                            <svg class="position-absolute" width="20" height="20" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24"
                                style="left: 16px; top: 50%; transform: translateY(-50%); color: #6b7280;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"></path>
                            </svg>
                        </div>
                        <button type="button" class="filter-toggle-btn" onclick="toggleSearchFilters()"
                            id="filterToggleBtn">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z">
                                </path>
                            </svg>
                        </button>
                    </div>

                    <!-- Search Filters and Sort Options -->
                    <div id="searchFiltersContainer" class="search-filters-container" style="display: none;">
                        <div class="filters-row">
                            <!-- Sort Options -->
                            <div class="filter-dropdown">
                                <button type="button" class="filter-btn" id="sortDropdownBtn">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        style="margin-right: 6px;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                                    </svg>
                                    Sort
                                    <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        style="margin-left: 6px;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </button>
                                <div class="filter-dropdown-menu" id="sortDropdownMenu">
                                    <div class="dropdown-item" data-value="relevance">
                                        <span>Best matches</span>
                                    </div>
                                    <div class="dropdown-item" data-value="last_edited_newest">
                                        <span>Last edited: Newest first</span>
                                    </div>
                                    <div class="dropdown-item" data-value="last_edited_oldest">
                                        <span>Last edited: Oldest first</span>
                                    </div>
                                    <div class="dropdown-item" data-value="created_newest">
                                        <span>Created: Newest first</span>
                                    </div>
                                    <div class="dropdown-item" data-value="created_oldest">
                                        <span>Created: Oldest first</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Title Only Filter -->
                            <button type="button" class="filter-btn" id="titleOnlyBtn">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    style="margin-right: 6px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4 6h16M4 12h16M4 18h7"></path>
                                </svg>
                                Aa Title only
                            </button>

                            <!-- Created By Filter -->
                            <div class="filter-dropdown">
                                <button type="button" class="filter-btn" id="createdByDropdownBtn">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        style="margin-right: 6px;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                                        </path>
                                    </svg>
                                    Created by
                                    <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        style="margin-left: 6px;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </button>
                                <div class="filter-dropdown-menu" id="createdByDropdownMenu">
                                    <div class="dropdown-search">
                                        <input type="text" id="memberSearchInput" placeholder="Search people"
                                            class="dropdown-search-input">
                                    </div>
                                    <div class="dropdown-item" data-value="all">
                                        <div class="member-avatar">A</div>
                                        <span>All members</span>
                                    </div>
                                    <div id="memberList"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Search Results -->
                    <div id="searchResults" class="search-results">
                        <!-- Loading State -->
                        <div id="searchLoading" class="text-center py-4" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="sr-only">Searching...</span>
                            </div>
                            <div class="mt-2" style="color: #6b7280;">Searching...</div>
                        </div>

                        <!-- Empty State -->
                        <div id="searchEmpty" class="text-center py-5" style="color: #6b7280;">
                            <svg width="48" height="48" fill="currentColor" viewBox="0 0 24 24"
                                style="opacity: 0.5; margin-bottom: 16px;">
                                <path
                                    d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">
                                </path>
                            </svg>
                            <p class="mb-1" style="font-size: 16px; font-weight: 500;">Search across your vault</p>
                            <p style="font-size: 14px;">Find folders, knowledge items, and sessions quickly</p>
                        </div>

                        <!-- No Results State -->
                        <div id="searchNoResults" class="text-center py-5" style="color: #6b7280; display: none;">
                            <svg width="48" height="48" fill="currentColor" viewBox="0 0 24 24"
                                style="opacity: 0.5; margin-bottom: 16px;">
                                <path
                                    d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                            </svg>
                            <p class="mb-1" style="font-size: 16px; font-weight: 500;">No results found</p>
                            <p style="font-size: 14px;">Try adjusting your search terms or filters</p>
                        </div>

                        <!-- Results Sections -->
                        <div id="searchResultsContent" style="display: none;">
                            <!-- Folders Results -->
                            <div id="foldersResults" style="display: none;">
                                <h6 class="mb-3"
                                    style="color: #374151; font-weight: 600; border-bottom: 1px solid #e5e7eb; padding-bottom: 8px;">
                                    <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                                        style="margin-right: 6px; color: #f59e0b;">
                                        <path
                                            d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z" />
                                    </svg>
                                    Folders
                                </h6>
                                <div id="foldersResultsList"></div>
                            </div>

                            <!-- Knowledge Items Results -->
                            <div id="knowledgeResults" style="display: none;">
                                <h6 class="mb-3 mt-4"
                                    style="color: #374151; font-weight: 600; border-bottom: 1px solid #e5e7eb; padding-bottom: 8px;">
                                    <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                                        style="margin-right: 6px; color: #3b82f6;">
                                        <path
                                            d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                                    </svg>
                                    Knowledge Items
                                </h6>
                                <div id="knowledgeResultsList"></div>
                            </div>

                            <!-- Sessions Results -->
                            <div id="sessionsResults" style="display: none;">
                                <h6 class="mb-3 mt-4"
                                    style="color: #374151; font-weight: 600; border-bottom: 1px solid #e5e7eb; padding-bottom: 8px;">
                                    <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                                        style="margin-right: 6px; color: #10b981;">
                                        <path
                                            d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z" />
                                    </svg>
                                    Sessions
                                </h6>
                                <div id="sessionsResultsList"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button type="button" class="modal-close" id="close-profile-modal">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div class="modal-body" style="padding-right:0px !important;">
                <div class="modal-main">
                    <div id="tab-profile" class="tab-content">
                        <div class="label-section">Account Settings</div>
                        <div class="devider"></div>
                        <div class="profile-photo-section">
                            <div class="profile-photo">
                                <div class="photo-placeholder">
                                    <img th:src="${currentUser.avatar != null and !#strings.isEmpty(currentUser.avatar) ? currentUser.avatar : 'https://placehold.co/400x400'}"
                                        alt="Profile Avatar" id="profile-avatar-img">
                                </div>
                                <div class="photo-info">
                                    <span>Preferred name</span>
                                    <div class="input-wrapper">
                                        <input type="text" id="profile-username" th:value="${currentUser.name}" />
                                    </div>
                                </div>
                            </div>
                            <div class="photo-upload-info">
                                <form id="avatar-upload-form" th:action="@{/vault-management/upload-avatar}"
                                    method="post" enctype="multipart/form-data" style="display: inline;">
                                    <input type="file" id="avatar-file-input" name="avatar"
                                        accept=".png,.jpg,.jpeg,.gif" style="display: none;" />
                                    <a class="link-add-photo" href="#"
                                        onclick="document.getElementById('avatar-file-input').click(); return false;"
                                        id="add-photo-link">Add
                                        photo</a>
                                </form>
                                <span class="photo-format-info">We support PNGs, JPEGs and GIFs under 10MB</span>
                            </div>
                        </div>
                        <div class="label-section">Personal Information</div>
                        <div class="devider"></div>
                        <div class="personal-info-section">
                            <div class="profile-grid">
                                <div class="profile-field">
                                    <div class="label-field">Department</div>
                                    <div class="value-field"
                                        th:text="${currentUser.department != null ? currentUser.department : 'Not specified'}">
                                        Not
                                        specified</div>
                                </div>
                                <div class="profile-field">
                                    <div class="label-field">Gender</div>
                                    <select id="profile-gender">
                                        <option value="">Select gender</option>
                                        <option value="Male" th:selected="${currentUser.gender == 'Male'}">Male</option>
                                        <option value="Female" th:selected="${currentUser.gender == 'Female'}">Female
                                        </option>
                                        <option value="Other" th:selected="${currentUser.gender == 'Other'}">Other
                                        </option>
                                    </select>
                                </div>
                                <div class="profile-field">
                                    <div class="label-field">Phone Number</div>
                                    <input type="tel" id="profile-phone" th:value="${currentUser.phoneNumber}"
                                        placeholder="Enter phone number" />
                                </div>
                                <div class="profile-field">
                                    <div class="label-field">Date of Birth</div>
                                    <input type="date" id="profile-dob"
                                        th:value="${currentUser.dateOfBirth != null ? currentUser.dateOfBirth.toString() : ''}" />
                                </div>
                            </div>
                            <div class="save-button-container">
                                <button type="button" id="save-profile-btn" class="modal-btn modal-form-btn"
                                    style="border-radius: 40px !important;">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                        <div class="label-section">Account Security</div>
                        <div class="devider"></div>
                        <div class="security-section">
                            <div class="account-security-field">
                                <div>
                                    <div class="label-field">Email</div>
                                    <div class="value-field" th:text="${currentUser.email}">Email</div>
                                </div>
                            </div>
                            <div class="account-security-field">
                                <div>
                                    <div class="label-field">Password</div>
                                    <div th:if="${currentUser.password == null}" class="value-field">Set a permanent
                                        password to login to your account.
                                    </div>
                                    <div th:if="${currentUser.password != null}" class="value-field">Change your
                                        password
                                        to login to your account.
                                    </div>
                                </div>
                                <div th:if="${currentUser.password != null and !#strings.isEmpty(currentUser.password)}"
                                    class="modal-btn" id="changePassword" style="border-radius: 40px !important;">
                                    Change password
                                </div>
                                <div th:if="${currentUser.password == null or #strings.isEmpty(currentUser.password)}"
                                    class="modal-btn" id="addPassword" style="border-radius: 40px !important;">
                                    Add password
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

</html>